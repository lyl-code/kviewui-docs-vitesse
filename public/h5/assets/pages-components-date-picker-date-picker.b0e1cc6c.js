import{_ as e}from"./kui-text.d338fb2c.js";import{P as t,v as a,x as o,r as i,A as r,N as s,a3 as l,g as u,e as n,i as c,c as d,d as k,w as h,f as m,h as y,B as f,m as p,q as g,G as w,I as v,H as _,s as D,j as x}from"./index.4769b127.js";import{_ as b}from"./kui-button.fcbf8c10.js";import{_ as C}from"./kui-icons.3c452229.js";import{s as A}from"./array.8ffd8dde.js";import{c as S,_ as P}from"./kui-page.12878643.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as j}from"./kui-cell-group.bf65a318.js";import{_ as T}from"./kui-space.2c8c8efa.js";import"./kui-spin.40ca1a3c.js";const Y=["日","一","二","三","四","五","六"],I=new Date,z=I.getFullYear(),B=I.getMonth()+1;I.getDate(),I.getDate();const N=I.getDate();I.getDay();const $=(e,t)=>{let a=[];if(!e||!t){let a=new Date;e=a.getFullYear(),t=a.getMonth()+1}const o=new Date(e,t-1,1).getDay(),i=new Date(e,t-1,0).getDate(),r=new Date(e,t,0).getDate();for(let s=0;s<42;s++){let l=e,u=t,n=s+1-o,c=n;n<=0?(u-=1,c=n+i):n>r&&(u+=1,c=n-r),13===u&&(u=1,l+=1),0===u&&(u=12,l-=1),a.push({year:l,month:u,date:n,cursorDate:c,render:{}})}return a},W={modelValue:{type:[String,Array],default:""},type:{type:String,default:"date"},allowedDates:{type:Function,default:()=>{}},color:{type:String,default:"primary"},colorLevel:{type:[String,Number],default:5},headerColor:{type:String,default:"primary"},shadow:{type:Boolean,default:!1},firstDayOfWeek:{type:[String,Number],default:0},min:{type:String,default:""},max:{type:String,default:""},showCurrent:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},range:{type:Boolean,default:!1},touchable:{type:Boolean,default:!1},mode:{type:String,default:()=>{var e,t;return null!=(t=null==(e=a(S,void 0))?void 0:e.mode)?t:"light"}}},F="kui-datepicker";const V=M(o({name:F,props:W,emits:["switch","change"],setup(e,{emit:a}){const{proxy:o}=u(),n=o.$theme,c=Y,d=i({dateData:A($(z,B),7),nowMonth:B,nowYear:z,nowDay:N,datePickerActiveClass:"",numberActiveClass:"",touchStart:{x:0,y:0},header:{year:z,month:B,day:N},active:{date:N,month:B,year:z},mode:e.mode}),k=r((()=>{const e=i({});return e.minHeight="500rpx",e.minWidth="580rpx",e})),h=r((()=>{const e=i({});return e.width=e.height=e.borderRadius="70rpx",e.backgroundColor=n.colors[d.mode].primary[5],e.transition="opacity 0.3s",e})),m=(e=d.nowYear,t=d.nowMonth)=>{d.dateData=A($(e,t),7)},y=(e,t,a=z)=>{e<d.header.month?d.numberActiveClass="active-number-out":e>d.header.month?d.numberActiveClass="active-number-in":t<d.header.day?d.numberActiveClass="active-number-out":t>d.header.day&&(d.numberActiveClass="active-number-in"),d.header.month=e,d.header.day=t,d.header.year=a,setTimeout((()=>{d.numberActiveClass=""}),300)};return{name:F,theme:n,...s({weekValue:c}),datePickerStyle:k,state:d,dayItemStyle:e=>{const t=i({});return t.width=""+1/7,t.padding="4rpx 0",t.height="70rpx",t.opacity=d.nowMonth===e.month?1:.5,t},getNextMonthData:()=>{d.datePickerActiveClass="active-date-out",d.nowMonth++,d.nowMonth>12&&(d.nowYear+=1,d.nowMonth=1),m(),setTimeout((()=>{d.datePickerActiveClass=""}),300)},getPreMonthData:()=>{d.datePickerActiveClass="active-date-in",d.nowMonth--,d.nowMonth<1&&(d.nowMonth=12,d.nowYear--),m(),setTimeout((()=>{d.datePickerActiveClass=""}),300)},convertToChinaNum:l,onTouchStart:e=>{d.touchStart.x=e.touches[0].clientX,d.touchStart.y=e.touches[0].clientY},onTouchEnd:e=>{e.changedTouches[0].clientX,d.touchStart.x,e.changedTouches[0].clientX,d.touchStart.x},handleData:e=>e<10?`0${e}`:e,getWeekDay:(e,a,o)=>{const i=(e=>{const a=new Date(e);return"Invalid Date"==a?(t("warn","at common/utils/date.ts:5","utils/date debug：日期格式错误"),!1):a.getDay()})(`${e}-${a}-${o}`);return 0===i?"日":l(i)},onClickDatePanel:(e,t)=>{__f__("log","at components/kui-date-picker/kui-date-picker.vue:252",t),y(t.month,t.date,t.year),d.active.date=d.header.day=t.cursorDate,d.active.month=d.header.month=t.month,d.active.year=d.header.year=t.year},dayActiveItemStyle:h,isDayActive:e=>e.cursorDate===d.active.date&&e.month===d.active.month&&e.year===d.active.year,getDateData:m,nowYear:z,nowMonth:B,getTodayData:()=>{z>d.nowYear?d.datePickerActiveClass="active-date-in":z<d.nowYear?d.datePickerActiveClass="active-date-out":N>d.nowDay?d.datePickerActiveClass="active-date-in":N<d.nowDay||B>d.nowMonth?d.datePickerActiveClass="active-date-out":B<d.nowMonth&&(d.datePickerActiveClass="active-date-in"),m(z,B),d.nowYear=d.active.year=z,d.nowMonth=d.active.month=B,d.nowDay=d.active.date=N,setTimeout((()=>{d.datePickerActiveClass=""}),300),y(B,N)}}}}),[["render",function(t,a,o,i,r,s){const l=n(c("kui-text"),e),u=x,A=n(c("kui-button"),b),S=n(c("kui-icons"),C);return d(),k(u,{class:p(["kui-rounded kui-w-full kui-bg-white kui-overflow-hidden",t.name])},{default:h((()=>[m(u,{class:"kui-flex kui-flex-col kui-items-start kui-py-3 kui-px-4 kui-h-13 kui-bg-green-500 kui-rounded-t"},{default:h((()=>[m(u,{class:"kui-opacity-70"},{default:h((()=>[m(l,{color:"white","font-weight":200},{default:h((()=>[y(f(t.state.header.year),1)])),_:1})])),_:1}),m(u,{class:"kui-mt-1 kui-overflow-hidden kui-w-full kui-flex kui-items-center kui-justify-between"},{default:h((()=>[m(u,{class:p(t.state.numberActiveClass)},{default:h((()=>[m(l,{color:"white",size:`${t.theme.size.fonts["3xl"]}${t.theme.size.fontUnit}`},{default:h((()=>[y(f(t.handleData(t.state.header.month))+"-"+f(t.handleData(t.state.header.day))+" 星期"+f(t.getWeekDay(t.state.header.year,t.state.header.month,t.state.header.day)),1)])),_:1},8,["size"])])),_:1},8,["class"]),m(u,{class:"kui-opacity-90"},{default:h((()=>[m(A,{size:"small",shadow:"",gradient:!1,type:"primary","background-color":t.theme.colors[t.state.mode].primary[4],onClick:t.getTodayData},{default:h((()=>[y("返回今天")])),_:1},8,["background-color","onClick"])])),_:1})])),_:1})])),_:1}),m(u,{class:"kui-pb-3",style:g(t.datePickerStyle),onTouchstart:t.onTouchStart,onTouchend:t.onTouchEnd},{default:h((()=>[m(u,{class:"kui-px-5 kui-mt-3 kui-flex kui-justify-between"},{default:h((()=>[m(u,{onClick:t.getPreMonthData},{default:h((()=>[m(S,{size:40,color:"grey",type:"keyboard_arrow_left"})])),_:1},8,["onClick"]),m(u,{class:p(["kui-flex",t.state.datePickerActiveClass])},{default:h((()=>[m(l,{"font-weight":800},{default:h((()=>[y(f(t.state.nowYear),1)])),_:1}),m(u,{class:"kui-mx-0-5"}),m(l,{"font-weight":800},{default:h((()=>[y(f(t.convertToChinaNum(t.state.nowMonth))+"月",1)])),_:1})])),_:1},8,["class"]),m(u,{onClick:t.getNextMonthData},{default:h((()=>[m(S,{size:40,color:"grey",type:"keyboard_arrow_right"})])),_:1},8,["onClick"])])),_:1}),m(u,{class:p(["kui-flex kui-justify-center kui-px-2 kui-mt-3",t.state.datePickerActiveClass])},{default:h((()=>[(d(!0),w(v,null,_(t.weekValue,((e,a)=>(d(),k(u,{key:a,class:"kui-flex kui-flex-1 kui-justify-center",style:g(t.dayItemStyle)},{default:h((()=>[m(l,{color:t.theme.colors[t.mode].grey[5]},{default:h((()=>[y(f(e),1)])),_:2},1032,["color"])])),_:2},1032,["style"])))),128))])),_:1},8,["class"]),m(u,{class:"kui-py-0"},{default:h((()=>[(d(!0),w(v,null,_(t.state.dateData,((e,a)=>(d(),k(u,{key:a,class:p(["kui-flex kui-justify-center kui-px-2 kui-flex-wrap",t.state.datePickerActiveClass])},{default:h((()=>[(d(!0),w(v,null,_(e,((e,a)=>(d(),k(u,{key:a,class:"kui-flex kui-flex-1 kui-items-center kui-justify-center kui-mt-0 kui-relative",style:g({...t.dayItemStyle(e),backgroundColor:t.state.activeDate===e.date?t.theme.colors[t.mode].primary[6]:"",...e.render}),onClick:o=>t.onClickDatePanel(a,e)},{default:h((()=>[m(u,{class:"kui-absolute kui-flex kui-flex-col kui-justify-center kui-items-center"},{default:h((()=>[m(l,{color:t.theme.colors[t.mode].grey[9],weight:600},{default:h((()=>[y(f(e.cursorDate),1)])),_:2},1032,["color"])])),_:2},1024),t.isDayActive(e)?(d(),k(u,{key:0,class:"kui-absolute kui-flex kui-items-center kui-justify-center",style:g(t.dayActiveItemStyle)},{default:h((()=>[m(l,{color:t.theme.colors[t.mode].grey[0],weight:600},{default:h((()=>[y(f(e.cursorDate),1)])),_:2},1032,["color"])])),_:2},1032,["style"])):D("",!0)])),_:2},1032,["style","onClick"])))),128))])),_:2},1032,["class"])))),128))])),_:1})])),_:1},8,["style","onTouchstart","onTouchend"])])),_:1},8,["class"])}],["__scopeId","data-v-2b4c39d4"]]);const X=M({setup(){}},[["render",function(e,t,a,o,i,r){const s=n(c("kui-date-picker"),V),l=n(c("kui-cell-group"),j),u=x,y=n(c("kui-space"),T),f=n(c("kui-page"),P);return d(),k(u,{class:"kui-w-full kui-h-full"},{default:h((()=>[m(f,{"custom-header":!1},{body:h((()=>[m(u,{class:"kui-w-full"},{default:h((()=>[m(y,{gap:[30,0],direction:"column"},{default:h((()=>[m(u,{class:"kui-w-full"},{default:h((()=>[m(l,{title:"基本用法"},{default:h((()=>[m(s)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}]]);export{X as default};
