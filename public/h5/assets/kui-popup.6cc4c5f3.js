import{_ as o}from"./kui-icons.3c452229.js";import{v as e,L as t,x as i,r as s,u as a,k as n,g as l,e as c,i as p,c as r,d as u,w as d,f as k,m as f,q as h,s as g,z as m,j as y}from"./index.4769b127.js";import{_ as C}from"./kui-overlay.4319bfe8.js";import{c as S}from"./kui-page.12878643.js";import{_ as z}from"./_plugin-vue_export-helper.cdc0426e.js";const _=z(i({name:"kui-popup",props:{width:{type:String,default:""},height:{type:String,default:""},position:{type:String,default:"center"},closeOnClickMask:{type:Boolean,default:!0},radiusSize:{type:String,default:"base"},show:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},closeIconPosition:{type:String,default:"right"},closeIconType:{type:String,default:"cancel"},closeIconColor:{type:String,default:"rgba(0,0,0,0.5)"},closeIconSize:{type:Number,default:40},mode:{type:String,default:()=>{var o,t;return null!=(t=null==(o=e(S,void 0))?void 0:o.mode)?t:"light"}},overlayNess:{type:Number,default:t}},emits:["open","close","click-close-icon"],options:{virtualHost:!0},setup(o,e){const{proxy:t}=l(),i=t.$theme,c=uni.getSystemInfoSync(),p=s({width:"",height:"",popupContainerHeight:"100%",popupContainerWidth:"100%",position:o.position,classes:"",positionClass:"",containerClass:"",isMaskClick:o.closeOnClickMask,radiusSize:i.size.radiusSize[o.radiusSize],topStyle:"",useContentSlot:a().content,backgroundColor:"white",mode:o.mode}),r=o=>(p.containerClass=o,"center"==o?(p.positionClass="kui-items-center kui-justify-center",__f__("log","at components/kui-popup/kui-popup.vue:92",p.topStyle),"scale-in-center"):`slide-in-${o}`),u=o=>"center"==o?"scale-out-center":`slide-out-${o}`,d=()=>{t.$refs["popup-shade"].changeMaskClick(!0),p.classes=u(o.position),setTimeout((()=>{t.$refs["popup-shade"].close(),e.emit("close")}),200)};p.radiusSize=i.size.radiusSize[o.radiusSize];const k=()=>{"light"===p.mode&&(p.backgroundColor="white"),"dark"===p.mode&&(p.backgroundColor=i.colors[p.mode].grey[1])};return k(),uni.$on("changeMode",(o=>{p.mode=o,k()})),n((()=>{if("center"==p.position)return!1;"left"!=p.position&&"right"!=p.position||(p.width=c.windowWidth/2+"px",p.height="100%"),"top"!=p.position&&"bottom"!=p.position||(p.height=o.height?o.height:c.windowHeight/3+"px",p.width=`${c.windowWidth}px`),"bottom"==p.position||p.position})),{data:p,positionInAnimate:r,positionOutAnimate:u,changeRadiusSize:o=>{p.radiusSize=i.size.radiusSize[o]},open:()=>{t.$refs["popup-shade"].changeMaskClick(!1),t.$refs["popup-shade"].open(),p.classes=r(o.position),e.emit("open")},close:()=>{o.closeOnClickMask&&d()},onClose:()=>{__f__("log","at components/kui-popup/kui-popup.vue:151","close")},onClickCloseIcon:()=>{e.emit("click-close-icon")},forceClose:d,proxy:t}}}),[["render",function(e,t,i,s,a,n){const l=c(p("kui-icons"),o),S=y,z=c(p("kui-overlay"),C);return r(),u(S,{class:"kui-popup"},{default:d((()=>[k(z,{onClose:e.close,"close-on-click-mask":e.data.isMaskClick,"vnode-center":!1,ref:"popup-shade",overlayNess:e.overlayNess},{content:d((()=>[k(S,{class:f(["kui-w-full kui-h-full",[e.data.classes]])},{default:d((()=>[k(S,{class:f(["popup-content kui-fixed kui-py-0 kui-box-border",[e.data.containerClass,"top"===e.data.position&&e.data.radiusSize?"kui-pb-4":""]]),style:h({width:e.data.width,minHeight:e.data.height,backgroundColor:e.data.backgroundColor,borderTopLeftRadius:`${"bottom"==e.data.position||"center"==e.data.position?e.data.radiusSize:0}rpx`,borderTopRightRadius:`${"bottom"==e.data.position||"center"==e.data.position?e.data.radiusSize:0}rpx`,borderBottomLeftRadius:`${"top"==e.data.position||"center"==e.data.position?e.data.radiusSize:0}rpx`,borderBottomRightRadius:`${"top"==e.data.position||"center"==e.data.position?e.data.radiusSize:0}rpx`})},{default:d((()=>[e.showIcon?(r(),u(S,{key:0},{default:d((()=>["right"==e.closeIconPosition?(r(),u(S,{key:0,class:"kui-w-full kui-flex kui-justify-end"},{default:d((()=>[k(S,{class:"kui-relative",style:{top:"30rpx",right:"30rpx"},onClick:e.onClickCloseIcon},{default:d((()=>[k(l,{type:e.closeIconType,color:e.closeIconColor,size:e.closeIconSize},null,8,["type","color","size"])])),_:1},8,["onClick"])])),_:1})):g("",!0),"left"==e.closeIconPosition?(r(),u(S,{key:1,class:"kui-w-full kui-flex"},{default:d((()=>[k(S,{class:"kui-relative",style:{top:"30rpx",left:"30rpx"},onClick:e.onClickCloseIcon},{default:d((()=>[k(l,{type:e.closeIconType,color:e.closeIconColor,size:e.closeIconSize},null,8,["type","color","size"])])),_:1},8,["onClick"])])),_:1})):g("",!0)])),_:1})):g("",!0),m(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"]),k(S,null,{default:d((()=>[m(e.$slots,"content",{},void 0,!0)])),_:3})])),_:3},8,["class"])])),_:3},8,["onClose","close-on-click-mask","overlayNess"])])),_:3})}],["__scopeId","data-v-c56b7e8e"]]);export{_};
