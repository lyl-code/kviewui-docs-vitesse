import{_ as e}from"./kui-text.d338fb2c.js";import{v as o,x as t,T as r,r as i,A as l,y as d,g as a,e as s,i as u,W as n,X as c,c as m,d as p,w as y,f as h,q as g,h as k,B as f,s as b,G as C,I as x,H as S,D as w,m as B,j as K}from"./index.4769b127.js";import{_ as v}from"./kui-icons.3c452229.js";import{_ as T}from"./kui-popup.6cc4c5f3.js";import{c as _}from"./kui-page.12878643.js";import{_ as z}from"./_plugin-vue_export-helper.cdc0426e.js";const j={show:{type:Boolean,default:!1},title:{type:String,default:""},type:{type:String,default:"default"},rightSidebar:{type:Boolean,default:!1},randomNumber:{type:Boolean,default:!1},overlay:{type:Boolean,default:!1},modelValue:{type:[String,Number],default:""},maxlength:{type:[String,Number],default:6},idcard:{type:Boolean,default:!1},inputting:{type:Boolean,default:!1},confirmText:{type:String,default:"完成"},confirmBackgroundColor:{type:String,default:"primary"},mode:{type:String,default:()=>{var e,t;return null!=(t=null==(e=o(_,void 0))?void 0:e.mode)?t:"light"}}},$="kui-numberkeyboard";const R=z(t({name:$,props:j,emits:["update:show","update:modelValue","input","delete","close","done"],setup(e,{emit:o}){const{proxy:t}=a(),s=t.$theme,u=r(null),n=i({mode:e.mode,popupShow:e.show,randomNumber:e.randomNumber,show:e.show,topKeyCode:[1,2,3,4,5,6,7,8,9],topKeyBackgroundColor:["white","white","white","white","white","white","white","white","white"],bottomBackgroundColor:["white","white","white"],rightSidebarBottomBackgroundColor:["white","white"],rightSidebarBackgroundColor:["white",e.confirmBackgroundColor],topKeyBackgroundColorLevel:[0,0,0,0,0,0,0,0,0],bottomKeyBackgroundColorLevel:[0,0,0],keyColor:s.colors[e.mode].grey[8]}),c=(e,o=!1)=>{o?e.sort((()=>Math.random()>.5?-1:1)):n.topKeyCode=[1,2,3,4,5,6,7,8,9]},m=l((()=>{const o=i({});return o.backgroundColor=s.colors[e.mode].grey[2],o.paddingTop="15rpx",o.paddingLeft="15rpx",o})),p=o=>{n.topKeyBackgroundColor.forEach(((t,r)=>{n.topKeyBackgroundColor[r]="dark"===o?s.colors[e.mode].grey[0]:"white"})),n.bottomBackgroundColor.forEach(((t,r)=>{n.bottomBackgroundColor[r]="dark"===o?s.colors[e.mode].grey[0]:"white"})),n.rightSidebarBottomBackgroundColor.forEach(((t,r)=>{n.rightSidebarBottomBackgroundColor[r]="dark"===o?s.colors[e.mode].grey[0]:"white"})),n.rightSidebarBackgroundColor.forEach(((t,r)=>{n.rightSidebarBackgroundColor[r]=0===r?"dark"===o?s.colors[e.mode].grey[0]:"white":s.colors[e.mode][e.confirmBackgroundColor][5]})),n.keyColor=s.colors[o].grey[9]};return d((()=>[e.show,e.randomNumber]),(o=>{n.show=o[0],o[0]&&(u.value.open(),c(n.topKeyCode,!1),p(e.mode)),o[1]&&c(n.topKeyCode,!0)})),uni.$on("changeMode",(e=>{n.mode=e,p(e)})),{name:$,theme:s,state:n,popupDialog:u,rootStyle:m,commonKeyStyle:e=>{const o=i({});return o.borderRadius=`${s.size.radiusSize.xs}rpx`,"top"===e.type?o.backgroundColor=n.topKeyBackgroundColor[e.i-1]:e.rightSidebar?"right"===e.position?o.backgroundColor=n.rightSidebarBackgroundColor[e.i-1]:o.backgroundColor=n.rightSidebarBottomBackgroundColor[e.i-1]:o.backgroundColor=n.bottomBackgroundColor[e.i-1],o},keyStyle:e=>{const o=i({});return o.height="48px",o.lineHeight=1,o},closedPopup:()=>{o("update:show",!1),o("close")},onClose:()=>{e.overlay||u.value.forceClose()},onTouchstartKey:(o,t)=>{t.stopPropagation(),"top"===o.type?n.topKeyBackgroundColor[o.i-1]=s.colors[e.mode].grey[1]:o.rightSidebar?"right"===o.position?1===o.i?n.rightSidebarBackgroundColor[o.i-1]=s.colors[e.mode].grey[1]:n.rightSidebarBackgroundColor[o.i-1]=s.colors[e.mode][e.confirmBackgroundColor][6]:n.rightSidebarBottomBackgroundColor[o.i-1]=s.colors[e.mode].grey[1]:n.bottomBackgroundColor[o.i-1]=s.colors[e.mode].grey[1]},onTouchmoveKey:(e,o)=>{o.stopPropagation()},onTouchendKey:(t,r)=>{if(r.stopPropagation(),p(e.mode),"delete"===t.code)o("update:modelValue",e.modelValue.slice(0,e.modelValue.length-1)),o("delete");else if("keyboard-hide"===t.code)u.value.forceClose();else if("done"===t.code)o("done"),u.value.forceClose();else{let r=e.modelValue+t.code;e.modelValue.length<e.maxlength&&o("update:modelValue",r),o("input",`${t.code}`)}},getBottomKeyCode:o=>1===o?e.idcard?"X":"keyboard-hide":2===o?0:"delete",getRightSidebarBottomKeyCode:e=>1===e?0:2===e?".":void 0,getRightSidebarKeyCode:e=>1===e?"delete":2===e?"done":void 0}}}),[["render",function(o,t,r,i,l,d){const a=s(u("kui-text"),e),_=K,z=s(u("kui-icons"),v),j=s(u("kui-popup"),T);return n((m(),p(_,{class:B(["kui-w-full",o.name]),onClick:w(o.onClose,["stop"])},{default:y((()=>[h(j,{ref:"popupDialog","close-on-click-mask":!1,height:"0px","radius-size":"none",position:"bottom","overlay-ness":0,onClose:o.closedPopup},{default:y((()=>[o.title?(m(),p(_,{key:0,class:"kui-relative kui-pt-2 kui-pb-1",style:g({backgroundColor:o.theme.colors[o.state.mode].grey[2]})},{default:y((()=>[h(_,{class:"kui-flex kui-justify-center kui-items-center kui-box-border"},{default:y((()=>[h(_,{class:"kui-text-center"},{default:y((()=>[h(a,{color:o.state.keyColor,size:`${o.theme.size.fonts.lg}rpx`,weight:600},{default:y((()=>[k(f(o.title),1)])),_:1},8,["color","size"])])),_:1})])),_:1}),h(_,{class:"kui-absolute kui-mr-3",style:{right:"5rpx",bottom:"10rpx"},onClick:o.onClose},{default:y((()=>[h(a,{color:o.confirmBackgroundColor},{default:y((()=>[k("完成")])),_:1},8,["color"])])),_:1},8,["onClick"])])),_:1},8,["style"])):b("",!0),o.inputting?(m(),p(_,{key:1,class:"kui-relative kui-pt-2 kui-pb-1",style:g({backgroundColor:o.theme.colors[o.state.mode].grey[2]})},{default:y((()=>[h(_,{class:"kui-flex kui-justify-center kui-items-center kui-box-border"},{default:y((()=>[h(_,{class:"kui-text-center"},{default:y((()=>[h(a,{color:o.state.keyColor,size:`${o.theme.size.fonts.lg}rpx`,weight:600},{default:y((()=>[k("正在输入："+f(o.modelValue),1)])),_:1},8,["color","size"])])),_:1})])),_:1})])),_:1},8,["style"])):b("",!0),h(_,{class:"kui-h-full kui-w-full kui-flex kui-box-border",style:g(o.rootStyle)},{default:y((()=>[h(_,{class:"kui-w-full kui-box-border",style:g({width:""+(o.rightSidebar?"75%":"100%")})},{default:y((()=>[(m(!0),C(x,null,S(o.state.topKeyCode,(e=>(m(),p(_,{key:e,class:"kui-w-full kui-flex kui-box-border",style:{width:"33.3%",display:"inline-block","padding-right":"15rpx","padding-bottom":"15rpx"}},{default:y((()=>[h(_,{class:"kui-w-full kui-h-full kui-flex kui-flex-col kui-items-center kui-justify-center",style:g({...o.keyStyle({i:e,type:"top"}),...o.commonKeyStyle({i:e,type:"top"})}),onTouchstart:w((t=>o.onTouchstartKey({i:e,code:e,type:"top",rightSidebar:!1},t)),["prevent","stop"]),onTouchmove:w((t=>o.onTouchmoveKey({i:e,code:e,type:"top",rightSidebar:!1},t)),["stop","prevent"]),onTouchend:w((t=>o.onTouchendKey({i:e,code:e,type:"top",rightSidebar:!1},t)),["stop","prevent"])},{default:y((()=>[h(a,{mode:o.state.mode,color:o.state.keyColor,size:`${o.theme.size.fonts["3xl"]}rpx`},{default:y((()=>[k(f(e),1)])),_:2},1032,["mode","color","size"])])),_:2},1032,["style","onTouchstart","onTouchmove","onTouchend"])])),_:2},1024)))),128)),o.rightSidebar?(m(),C(x,{key:1},S(2,(e=>h(_,{class:"kui-w-full kui-flex kui-box-border",style:{width:"50%",display:"inline-block","padding-right":"15rpx","padding-bottom":"15rpx"}},{default:y((()=>[h(_,{class:"kui-w-full kui-h-full kui-flex kui-flex-col kui-items-center kui-justify-center",style:g({...o.keyStyle({i:e,code:o.getRightSidebarBottomKeyCode(e),type:"bottom"}),...o.commonKeyStyle({i:e,type:"bottom",rightSidebar:!0,position:"bottom"})}),onTouchstart:w((t=>o.onTouchstartKey({i:e,code:o.getRightSidebarBottomKeyCode(e),type:"bottom",rightSidebar:!0,position:"bottom"},t)),["prevent","stop"]),onTouchmove:w((t=>o.onTouchmoveKey({i:e,code:o.getRightSidebarBottomKeyCode(e),type:"bottom",rightSidebar:!0,position:"bottom"},t)),["stop","prevent"]),onTouchend:w((t=>o.onTouchendKey({i:e,code:o.getRightSidebarBottomKeyCode(e),type:"bottom",rightSidebar:!0,position:"bottom"},t)),["stop","prevent"])},{default:y((()=>[1===e?(m(),p(a,{key:0,mode:o.state.mode,color:o.state.keyColor,size:`${o.theme.size.fonts["3xl"]}rpx`},{default:y((()=>[k("0")])),_:1},8,["mode","color","size"])):b("",!0),2===e?(m(),p(a,{key:1,mode:o.state.mode,color:o.state.keyColor,size:`${o.theme.size.fonts["3xl"]}rpx`},{default:y((()=>[k(".")])),_:1},8,["mode","color","size"])):b("",!0)])),_:2},1032,["style","onTouchstart","onTouchmove","onTouchend"])])),_:2},1024))),64)):(m(),C(x,{key:0},S(3,(e=>h(_,{key:e,class:"kui-w-full kui-flex kui-box-border",style:{width:"33.3%",display:"inline-block","padding-right":"15rpx","padding-bottom":"15rpx"}},{default:y((()=>[h(_,{class:"kui-w-full kui-h-full kui-flex kui-flex-col kui-items-center kui-justify-center",style:g({...o.keyStyle({i:e,code:o.getBottomKeyCode(e),type:"bottom"}),...o.commonKeyStyle({i:e,type:"bottom",rightSidebar:!1})}),onTouchstart:w((t=>o.onTouchstartKey({i:e,code:o.getBottomKeyCode(e),type:"bottom",rightSidebar:!1},t)),["prevent","stop"]),onTouchmove:w((t=>o.onTouchmoveKey({i:e,code:o.getBottomKeyCode(e),type:"bottom",rightSidebar:!1},t)),["stop","prevent"]),onTouchend:w((t=>o.onTouchendKey({i:e,code:o.getBottomKeyCode(e),type:"bottom",rightSidebar:!1},t)),["stop","prevent"])},{default:y((()=>[1!==e||o.idcard?b("",!0):(m(),p(z,{key:0,mode:o.mode,color:o.state.keyColor,type:"keyboard_hide",size:o.theme.size.fonts["3xl"]},null,8,["mode","color","size"])),1===e&&o.idcard?(m(),p(a,{key:1,mode:o.state.mode,color:o.state.keyColor,size:`${o.theme.size.fonts["3xl"]}rpx`},{default:y((()=>[k("X")])),_:1},8,["mode","color","size"])):b("",!0),2===e?(m(),p(a,{key:2,mode:o.state.mode,color:o.state.keyColor,size:`${o.theme.size.fonts["3xl"]}rpx`},{default:y((()=>[k("0")])),_:1},8,["mode","color","size"])):b("",!0),3===e?(m(),p(z,{key:3,mode:o.mode,color:o.state.keyColor,type:"backspace",size:o.theme.size.fonts["3xl"]},null,8,["mode","color","size"])):b("",!0)])),_:2},1032,["style","onTouchstart","onTouchmove","onTouchend"])])),_:2},1024))),64))])),_:1},8,["style"]),o.rightSidebar?(m(),p(_,{key:0,class:"kui-w-full kui-h-full kui-box-border",style:{width:"25%","padding-right":"15rpx","line-height":"1"}},{default:y((()=>[(m(),C(x,null,S(2,(e=>h(_,{class:"kui-w-full kui-box-border",style:{"padding-bottom":"15rpx"}},{default:y((()=>[h(_,{class:"kui-w-full kui-flex kui-flex-col kui-items-center kui-justify-center kui-box-border",style:g([{height:"103px"},{...o.commonKeyStyle({i:e,type:"right",rightSidebar:!0,position:"right"})}]),onTouchstart:w((t=>o.onTouchstartKey({i:e,code:o.getRightSidebarKeyCode(e),rightSidebar:!0,position:"right"},t)),["stop","prevent"]),onTouchmove:w((t=>o.onTouchmoveKey({i:e,code:o.getRightSidebarKeyCode(e),rightSidebar:!0,position:"right"},t)),["stop","prevent"]),onTouchend:w((t=>o.onTouchendKey({i:e,code:o.getRightSidebarKeyCode(e),rightSidebar:!0,position:"right"},t)),["stop","prevent"])},{default:y((()=>[1===e?(m(),p(z,{key:0,mode:o.mode,color:o.state.keyColor,type:"backspace",size:o.theme.size.fonts["4xl"]},null,8,["mode","color","size"])):b("",!0),2===e?(m(),p(a,{key:1,mode:o.state.mode,color:"white",size:`${o.theme.size.fonts.xl}rpx`},{default:y((()=>[k(f(o.confirmText),1)])),_:1},8,["mode","size"])):b("",!0)])),_:2},1032,["style","onTouchstart","onTouchmove","onTouchend"])])),_:2},1024))),64))])),_:1})):b("",!0)])),_:1},8,["style"])])),_:1},8,["onClose"])])),_:1},8,["class","onClick"])),[[c,o.state.show]])}]]);export{R as _};
