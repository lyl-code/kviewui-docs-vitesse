var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,i=(e,l)=>{for(var a in l||(l={}))u.call(l,a)&&r(e,a,l[a]);if(t)for(var a of t(l))o.call(l,a)&&r(e,a,l[a]);return e};import{_ as s}from"./kui-text.66024d1c.js";import{D as d,E as n,r as m,a4 as c,ae as h,M as p,h as f,d as V,f as k,o as b,c as y,w as g,a as v,m as S,b as _,I as C,q as w,l as x,J as T,H as U,Q as j,R,S as z,i as A,_ as M}from"./index.6e0bac9a.js";import{c as $,r as O,_ as W}from"./kui-page.9f67228f.js";import{g as I,u as P}from"./element.f2d79fb5.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as B}from"./kui-cell-group.96f4bfae.js";import{_ as L}from"./kui-space.b29851da.js";import{_ as E}from"./kui-toast.17e4a5d8.js";import"./kui-icons.87a80e4b.js";import"./kui-animation.118fdc33.js";var X={modelValue:{type:[String,Number,Array],default:""},currentValue:{type:[String,Number,Array],default:""},max:{type:[String,Number],default:100},min:{type:[String,Number],default:0},step:{type:[String,Number],default:1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},trackHeight:{type:Number,default:12},thumbSize:{type:Number,default:30},range:{type:Boolean,default:!1},rules:{type:Object,default:{}},mode:{type:String,default:()=>{var e,l;return null!=(l=null==(e=d($,void 0))?void 0:e.mode)?l:"light"}},showRange:{type:Boolean,default:!1},hiddenLabel:{type:Boolean,default:!1},hiddenActiveRipple:{type:Boolean,default:!1},themeColor:{type:String,default:"primary"},inactiveColor:{type:String,default:""},thumbColor:{type:String,default:""},activeColor:{type:String,default:""}};var D=N(n({name:"kui-slider",props:X,emits:["update:modelValue","update:currentValue","change"],setup(e,{emit:l}){const{proxy:a}=V(),t=a.$theme,u=m({rippleActive:!1,modelValue:e.modelValue,currentValue:e.modelValue,error:!1,themeColor:e.themeColor}),o=`${I()}_slider`,r=c(null);let i=0,s=!1,d=u.modelValue,n=c(0);const k=l=>e.range&&Array.isArray(e.modelValue);let b=h(e.max)-h(e.min);const y=c(0),g=p((()=>{const l=m({});return l.height=`${e.trackHeight}rpx`,l.borderRadius=l.height,l}));let v,S,_;const C=()=>{var l;v=null!=(l=t.colors[e.mode][u.themeColor])?l:uni.kviewUIColor.generate(u.themeColor,{list:!0,dark:"dark"===e.mode}),S=e.inactiveColor?e.inactiveColor:v[1],_=e.activeColor?e.activeColor:v[5]};C();let w,x;f((()=>{setTimeout((()=>{P(r,"sliderWrap").then((e=>{i=e.width,w=e.left}))}))})),x=k(e.modelValue)?[0,0]:0;let T,U,j=0,R=h(e.modelValue);k(e.modelValue)&&(R=[h(e.modelValue[0]),h(e.modelValue[1])]);const z=(a="touchmove")=>{var t;e.rules&&e.rules.message&&!e.range&&(u.error=(t=+u.currentValue,!e.rules.validator(t)),u.error?(u.themeColor="danger",C()):(u.themeColor=e.themeColor,C())),l("change",{type:a,error:u.error,range:e.range,value:u.currentValue})},A=(l=0)=>e.range?e.modelValue[l]/b*100+"%":(+e.modelValue-+e.min)/b*100+"%",M=(a,t=y.value,o=u.modelValue)=>{let r;k(e.modelValue)?(o[t]=Math.abs(+a),d=o,r=o,u.currentValue=(e=>u.modelValue[0]>u.modelValue[1]?(e.slice(0).reverse(),e.slice(0).reverse()):e)(r)):(r=(l=>{const{min:a,max:t,step:u}=e;return l=Math.max(+a,Math.min(l,+t)),Math.round(l/+u)*+u})(+a),u.currentValue=r),l("update:currentValue",u.currentValue),l("update:modelValue",r)};return{theme:t,name:"kui-slider",elId:o,state:u,activeIndex:y,getActiveIndex:()=>{let e=0;return d[0]>=d[1]&&(e=1),console.log(e),e},commonStyle:g,wrapStyle:()=>{const l=m({});return l.backgroundColor=(e.disabled,S),l},sliderStyle:(l=0)=>{const a=m({});if(k(e.modelValue)){a.width=Math.abs(u.currentValue[1]-u.currentValue[0])/b*100+"%";let l=u.currentValue[0]<u.currentValue[1]?0:1;a.left=Math.abs(u.currentValue[l]-+e.min)/b*100+"%"}else a.width=A(l),a.left="0%";return e.activeColor.indexOf("linear-gradient")>-1?a.backgroundImage=_:a.backgroundColor=_,a.opacity=e.disabled?.7:1,s&&(a.transition="all 0.25s"),a},thumbWrapperStyle:(e=0)=>{const l=m({});return l.top="50%",l.left=A(e),l.transform="translate3d(-50%, -50%, 0)",s&&(l.transition="all 0.25s"),l},thumbStyle:()=>{let l=e.thumbColor?e.thumbColor:v[5];const a=m({});return a.width=a.height=a.borderRadius=`${e.thumbSize}rpx`,a.backgroundColor=l,console.log(v[5],l),e.disabled&&(e.thumbColor?a.opacity=.9:a.backgroundColor=v[3]),a},rippleStyle:(l=0)=>{const a=m({});return a.width=0,a.height=0,a.left=A(y.value),s&&(a.transition="all 0.25s"),u.rippleActive&&y.value===l?a.width=a.height=2.75*e.thumbSize+"rpx":a.width=a.height=0,a.backgroundColor=_,a.opacity=.3,a},labelStyle:(l=0)=>{const a=m({});return a.width=a.height=1.5*e.thumbSize+"rpx",a.borderRadius="50% 50% 0",e.activeColor.indexOf("linear-gradient")>-1?a.backgroundImage=_:a.backgroundColor=_,a.opacity=e.disabled?.7:1,a.top=`-${1.5*e.thumbSize+2*e.trackHeight+5}rpx`,a.left=A(l),a.transform=`translateX(-${1.5*e.thumbSize/2+1.5}rpx) rotate(45deg)`,a.padding="3rpx",s&&(a.transition="all 0.25s"),a},onTouchStart:l=>{e.disabled||e.readonly||(n=y.value,s=!0,k(e.modelValue)?(x[n]=l.touches[0].clientX,R[n]=e.modelValue[n]):(x=l.touches[0].clientX,R=e.modelValue),u.rippleActive=!0)},onTouchMove:l=>{e.disabled||e.readonly||(j=l.touches[0].clientX,s=!1,k(e.modelValue)?(U=(j-x[y.value])/i*b,T=Math.ceil(R[y.value]+U)):(U=(j-+x)/i*b,T=Math.ceil(+R+U)),T>=e.min&&T<=e.max&&M(T),l.stopPropagation(),l.preventDefault())},onTouchEnd:e=>{z("touchmove"),e.stopPropagation(),e.preventDefault(),u.rippleActive=!1},onClick:l=>{if(!e.disabled&&!e.readonly){if(k(e.modelValue)?R[y.value]=u.currentValue[y.value]:R=e.modelValue,j=l.touches[0].clientX,U=(j-w)/i*b,T=Math.ceil(U),T>=e.min&&T<=e.max){s=!0;let e=0;T<u.currentValue[0]?e=0:(T>u.currentValue[1]||T>(u.currentValue[0]+u.currentValue[1])/2)&&(e=1),M(T,e,u.currentValue)}z("click")}},sliderWrap:r}}}),[["render",function(e,l,a,t,u,o){const r=O(k("kui-text"),s),d=A;return b(),y(d,{class:x(e.name)},{default:g((()=>[v(d,{class:"kui-flex kui-h-full kui-items-center"},{default:g((()=>[e.showRange?(b(),y(d,{key:0,class:"kui-mr-3",style:S(i({},e.commonStyle))},{default:g((()=>[v(r,null,{default:g((()=>[_(C(e.min),1)])),_:1})])),_:1},8,["style"])):w("",!0),v(d,{class:x(["kui-w-full kui-relative kui-box-border kui-mt-3",e.name])},{default:g((()=>[v(d,{class:"kui-w-full kui-box-border","disable-scroll":"",id:"sliderWrap",ref:"sliderWrap",onClick:T(e.onClick,["stop","prevent"]),style:S(i(i({},e.commonStyle),e.wrapStyle()))},{default:g((()=>[e.range?(b(!0),j(z,{key:1},R(e.modelValue,((a,t)=>(b(),y(d,{key:t},{default:g((()=>[v(d,{class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-h-full",style:S(i(i({},e.commonStyle),e.sliderStyle(t)))},null,8,["style"]),e.hiddenActiveRipple?w("",!0):(b(),y(d,{key:0,class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-border-0 kui-rounded-full",style:S(i(i({},e.thumbWrapperStyle(t)),e.rippleStyle(t)))},null,8,["style"])),v(d,{class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-border-0",role:"slider","catch-move":!0,tabindex:e.disabled||e.readonly?void 0:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-disabled":e.disabled,"aria-readonly":e.readonly,"aria-orientation":"horizontal",id:`slider-${t}`,onTouchstart:T((l=>{e.activeIndex=t,e.onTouchStart(l)}),["stop","prevent"]),onTouchmove:T(e.onTouchMove,["stop","prevent"]),onTouchend:T(e.onTouchEnd,["stop","prevent"]),onClick:l[1]||(l[1]=T((e=>{e.stopPropagation()}),["stop","prevent"])),style:S(e.thumbWrapperStyle(t))},{default:g((()=>[U(e.$slots,"thumb",{},(()=>[v(d,{style:S(e.thumbStyle())},null,8,["style"])]))])),_:2},1032,["tabindex","aria-valuemin","aria-valuemax","aria-disabled","aria-readonly","id","onTouchstart","onTouchmove","onTouchend","style"]),e.hiddenLabel?w("",!0):(b(),y(d,{key:1,class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-flex kui-justify-center kui-items-center",style:S(i(i({},e.thumbWrapperStyle(t)),e.labelStyle(t)))},{default:g((()=>[v(d,{class:"kui-transform -kui-rotate-45"},{default:g((()=>[v(r,{color:e.theme.colors[e.mode].grey[0],size:`${e.theme.size.fonts.sm}rpx`},{default:g((()=>[_(C(e.modelValue[t]),1)])),_:2},1032,["color","size"])])),_:2},1024)])),_:2},1032,["style"]))])),_:2},1024)))),128)):(b(),y(d,{key:0},{default:g((()=>[v(d,{class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-h-full",style:S(i(i({},e.commonStyle),e.sliderStyle()))},null,8,["style"]),e.hiddenActiveRipple?w("",!0):(b(),y(d,{key:0,class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-border-0 kui-rounded-full",style:S(i(i({},e.thumbWrapperStyle()),e.rippleStyle(0)))},null,8,["style"])),v(d,{class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-border-0",role:"slider","catch-move":!0,tabindex:e.disabled||e.readonly?void 0:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-disabled":e.disabled,"aria-readonly":e.readonly,"aria-orientation":"horizontal",onTouchstart:T(e.onTouchStart,["stop","prevent"]),onTouchmove:T(e.onTouchMove,["stop","prevent"]),onTouchend:T(e.onTouchEnd,["stop","prevent"]),onClick:l[0]||(l[0]=T((e=>e.stopPropagation()),["stop","prevent"])),style:S(e.thumbWrapperStyle())},{default:g((()=>[U(e.$slots,"thumb",{},(()=>[v(d,{style:S(e.thumbStyle())},null,8,["style"])]))])),_:3},8,["tabindex","aria-valuemin","aria-valuemax","aria-disabled","aria-readonly","onTouchstart","onTouchmove","onTouchend","style"]),e.hiddenLabel?w("",!0):(b(),y(d,{key:1,class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-flex kui-justify-center kui-items-center",style:S(i(i({},e.thumbWrapperStyle()),e.labelStyle()))},{default:g((()=>[v(d,{class:"kui-transform -kui-rotate-45"},{default:g((()=>[v(r,{color:e.theme.colors[e.mode].grey[0],size:`${e.theme.size.fonts.sm}rpx`},{default:g((()=>[_(C(e.modelValue),1)])),_:1},8,["color","size"])])),_:1})])),_:1},8,["style"]))])),_:3}))])),_:3},8,["onClick","style"])])),_:3},8,["class"]),e.showRange?(b(),y(d,{key:1,class:"kui-ml-2",style:S(i({},e.commonStyle))},{default:g((()=>[v(r,null,{default:g((()=>[_(C(e.max),1)])),_:1})])),_:1},8,["style"])):w("",!0)])),_:3}),e.state.error?(b(),y(d,{key:0,class:"kui-mt-2"},{default:g((()=>[U(e.$slots,"error",{},(()=>[v(r,{color:"danger"},{default:g((()=>[_(C(e.rules.message),1)])),_:1})]))])),_:3})):w("",!0)])),_:3},8,["class"])}]]);var H=N({setup(){const e=c(0),t=c([20,60]),u=c(0),o=c(20),r=c(20),s=c(0),d=c(0),n=c(0),h=c([0,0,0,0,0,0]),p=c(20),f=c([20,20]),V={state:m({value:20,toast:{show:!1,content:""}}),methods:{onChange(e){e&&(V.state.toast.content=`当前值：${e.value}`,V.state.toast.show=!0)}}},k={state:m({value:20}),rules:{validator:e=>e>20,message:"值必须大于20"},methods:{onChange(e){console.log(e)}}};return b=i({},M({baseValue:e,rangeValue:t,customRangeValue:u,disableValue:o,readonlyValue:r,customStepValue:s,hiddenLabelValue:d,hiddenActiveRipple:n,customThemeColorValue:h,customStyleValue:p,customThumbStyleValue:f})),l(b,a({changeState:V,rulesState:k}));var b}},[["render",function(e,l,a,t,u,o){const r=O(k("kui-slider"),D),i=O(k("kui-cell-group"),B),d=A,n=O(k("kui-text"),s),m=O(k("kui-space"),L),c=O(k("kui-page"),W),h=O(k("kui-toast"),E);return b(),y(d,{class:"kui-w-full kui-h-full"},{default:g((()=>[v(c,{"custom-header":!1},{body:g((()=>[v(d,{class:"kui-w-full"},{default:g((()=>[v(m,{gap:[30,0],direction:"column"},{default:g((()=>[v(d,{class:"kui-w-full"},{default:g((()=>[v(i,{title:"基本用法"},{default:g((()=>[v(r,{modelValue:e.baseValue,"onUpdate:modelValue":l[0]||(l[0]=l=>e.baseValue=l)},null,8,["modelValue"])])),_:1})])),_:1}),v(d,{class:"kui-w-full"},{default:g((()=>[v(i,{title:"双滑块"},{default:g((()=>[v(r,{modelValue:e.rangeValue,"onUpdate:modelValue":l[1]||(l[1]=l=>e.rangeValue=l),range:""},null,8,["modelValue"])])),_:1})])),_:1}),v(d,{class:"kui-w-full"},{default:g((()=>[v(i,{title:"指定范围"},{default:g((()=>[v(r,{modelValue:e.customRangeValue,"onUpdate:modelValue":l[2]||(l[2]=l=>e.customRangeValue=l),"show-range":"",min:-5,max:5},null,8,["modelValue"])])),_:1})])),_:1}),v(d,{class:"kui-w-full"},{default:g((()=>[v(i,{title:"禁用"},{default:g((()=>[v(r,{modelValue:e.disableValue,"onUpdate:modelValue":l[3]||(l[3]=l=>e.disableValue=l),disabled:""},null,8,["modelValue"])])),_:1})])),_:1}),v(d,{class:"kui-w-full"},{default:g((()=>[v(i,{title:"只读"},{default:g((()=>[v(r,{modelValue:e.readonlyValue,"onUpdate:modelValue":l[4]||(l[4]=l=>e.readonlyValue=l),readonly:""},null,8,["modelValue"])])),_:1})])),_:1}),v(d,{class:"kui-w-full"},{default:g((()=>[v(i,{title:"指定步长"},{default:g((()=>[v(r,{modelValue:e.customStepValue,"onUpdate:modelValue":l[5]||(l[5]=l=>e.customStepValue=l),step:10},null,8,["modelValue"])])),_:1})])),_:1}),v(d,{class:"kui-w-full"},{default:g((()=>[v(i,{title:"隐藏标签"},{default:g((()=>[v(r,{modelValue:e.hiddenLabelValue,"onUpdate:modelValue":l[6]||(l[6]=l=>e.hiddenLabelValue=l),"hidden-label":""},null,8,["modelValue"])])),_:1})])),_:1}),v(d,{class:"kui-w-full"},{default:g((()=>[v(i,{title:"隐藏拖动水波纹",desc:"拖动得时候不显示按钮周围的水波纹样式"},{default:g((()=>[v(r,{modelValue:e.hiddenActiveRipple,"onUpdate:modelValue":l[7]||(l[7]=l=>e.hiddenActiveRipple=l),"hidden-active-ripple":""},null,8,["modelValue"])])),_:1})])),_:1}),v(d,{class:"kui-w-full"},{default:g((()=>[v(i,{title:"自定义主题"},{default:g((()=>[v(d,{class:"kui-my-3"},{default:g((()=>[v(r,{modelValue:e.customThemeColorValue[0],"onUpdate:modelValue":l[8]||(l[8]=l=>e.customThemeColorValue[0]=l),"theme-color":"info"},null,8,["modelValue"])])),_:1}),v(d,{class:"kui-my-6"},{default:g((()=>[v(r,{modelValue:e.customThemeColorValue[1],"onUpdate:modelValue":l[9]||(l[9]=l=>e.customThemeColorValue[1]=l),"theme-color":"danger"},null,8,["modelValue"])])),_:1}),v(d,{class:"kui-my-6"},{default:g((()=>[v(r,{modelValue:e.customThemeColorValue[2],"onUpdate:modelValue":l[10]||(l[10]=l=>e.customThemeColorValue[2]=l),"theme-color":"warning"},null,8,["modelValue"])])),_:1}),v(d,{class:"kui-my-6"},{default:g((()=>[v(r,{modelValue:e.customThemeColorValue[3],"onUpdate:modelValue":l[11]||(l[11]=l=>e.customThemeColorValue[3]=l),"theme-color":"gold"},null,8,["modelValue"])])),_:1}),v(d,{class:"kui-my-6"},{default:g((()=>[v(r,{modelValue:e.customThemeColorValue[4],"onUpdate:modelValue":l[12]||(l[12]=l=>e.customThemeColorValue[4]=l),"theme-color":"cyan"},null,8,["modelValue"])])),_:1}),v(d,{class:"kui-my-6"},{default:g((()=>[v(r,{modelValue:e.customThemeColorValue[5],"onUpdate:modelValue":l[13]||(l[13]=l=>e.customThemeColorValue[5]=l),"theme-color":"purple"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),v(d,{class:"kui-w-full"},{default:g((()=>[v(i,{title:"自定义样式"},{default:g((()=>[v(r,{"inactive-color":"rgba(163,184,255,1)","active-color":"linear-gradient(315deg, rgba(73,143,242,1) 0%,rgba(73,101,242,1) 100%)","thumb-color":"rgba(52,96,250,1)",modelValue:e.customStyleValue,"onUpdate:modelValue":l[14]||(l[14]=l=>e.customStyleValue=l)},null,8,["modelValue"])])),_:1})])),_:1}),v(d,{class:"kui-w-full"},{default:g((()=>[v(i,{title:"自定义滑块按钮",desc:"通过插槽实现"},{default:g((()=>[v(r,{modelValue:e.customThumbStyleValue[0],"onUpdate:modelValue":l[15]||(l[15]=l=>e.customThumbStyleValue[0]=l),"hidden-label":"","hidden-active-ripple":""},{thumb:g((()=>[v(d,{class:"kui-w-5 kui-h-5 kui-rounded-full kui-bg-white kui-shadow kui-border-0 kui-border-blue-600 kui-border kui-border-solid"})])),_:1},8,["modelValue"]),v(d,{class:"kui-mt-3"},{default:g((()=>[v(r,{modelValue:e.customThumbStyleValue[1],"onUpdate:modelValue":l[16]||(l[16]=l=>e.customThumbStyleValue[1]=l),"hidden-label":"","hidden-active-ripple":""},{thumb:g((()=>[v(d,{class:"kui-w-5 kui-h-3 kui-rounded-full kui-bg-blue-600 kui-shadow kui-border-0 kui-border-blue-600 kui-border kui-border-solid kui-flex kui-flex-col kui-items-center kui-justify-center kui-px-1 kui-py-px"},{default:g((()=>[v(n,{color:"white",size:"10px"},{default:g((()=>[_(C(e.customThumbStyleValue[1]),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),v(d,{class:"kui-w-full"},{default:g((()=>[v(i,{title:"选择事件监听"},{default:g((()=>[v(r,{modelValue:t.changeState.state.value,"onUpdate:modelValue":l[17]||(l[17]=e=>t.changeState.state.value=e),onChange:t.changeState.methods.onChange},null,8,["modelValue","onChange"])])),_:1})])),_:1}),v(d,{class:"kui-w-full"},{default:g((()=>[v(i,{title:"值的校验",desc:"暂不支持双滑块"},{default:g((()=>[v(r,{modelValue:t.rulesState.state.value,"onUpdate:modelValue":l[18]||(l[18]=e=>t.rulesState.state.value=e),rules:t.rulesState.rules,onChange:t.rulesState.methods.onChange},null,8,["modelValue","rules","onChange"])])),_:1})])),_:1}),v(i,{title:""},{default:g((()=>[v(n,{color:"hsl(213,10.00%, 56.86%)"},{default:g((()=>[_("示例数据为组件支持的部分数据，详细支持数据请参考组件源码和组件文档")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),v(h,{show:t.changeState.state.toast.show,"onUpdate:show":l[19]||(l[19]=e=>t.changeState.state.toast.show=e),content:t.changeState.state.toast.content},null,8,["show","content"])])),_:1})}]]);export{H as default};
