import{_ as e}from"./kui-text.d338fb2c.js";import{v as t,x as l,r as a,A as o,g as n,e as u,i,c as s,d as c,w as d,f as r,h as f,B as p,s as k,q as m,z as h,m as g,j as y,Z as b,T as V,N as _}from"./index.4769b127.js";import{_ as x}from"./kui-switch.5419dd7d.js";import{_ as w}from"./kui-cell-group.bf65a318.js";import{_ as S}from"./kui-icons.3c452229.js";import{c as C,_ as v}from"./kui-page.12878643.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as $}from"./kui-space.2c8c8efa.js";import{_ as z}from"./kui-toast.f1760cdf.js";import"./kui-animation.1c71067a.js";const I={modelValue:{type:[String,Number],default:""},label:{type:String,default:""},shape:{type:String,default:"round"},maxLength:{type:[String,Number],default:9999},background:{type:String,default:"grey"},backgroundLevel:{type:[String,Number],default:0},placeholder:{type:String,default:"请输入搜索内容"},clearable:{type:Boolean,default:!0},inputBackground:{type:String,default:"grey"},inputBackgroundLevel:{type:[Number,String],default:1},confirmType:{type:String,default:"done"},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},inputAlign:{type:String,default:"left"},mode:{type:String,default:()=>{var e,l;return null!=(l=null==(e=t(C,void 0))?void 0:e.mode)?l:"light"}},showAction:{type:Boolean,default:!1},showLefticon:{type:Boolean,default:!0},showRighticon:{type:Boolean,default:!1}},L=e=>e.indexOf("linear-gradient")>-1,A="kui-searchbar";const U=B(l({name:A,props:I,emits:["update:modelValue","change","click-input","search","focus","blur","clear","click-action","click-lefticon","click-righticon"],setup(e,{emit:t}){const{proxy:l}=n(),u=l.$theme,i=a({mode:e.mode}),s=e=>u.colors[i.mode][e]?u.colors[i.mode][e]:uni.kviewUIColor.generate(e,{list:!0,dark:"dark"===i.mode}),c=o((()=>{const t=a({});if(t.lineHeight=1,t.padding="15rpx 30rpx",L(e.background))t.backgroundImage=e.background;else{const l=s(e.background);t.background=l[e.backgroundLevel]}return t})),d=o((()=>`\n\t\t\t\t\tfontSize: ${u.size.fonts.base}${u.size.fontUnit};\n\t\t\t\t`)),r=o((()=>{const t=a({});if(L(e.inputBackground))t.backgroundImage=e.inputBackground;else{const l=s(e.inputBackground);t.background=l[e.inputBackgroundLevel]}return t.display="flex",t.flex="1 1 auto",t.padding="15rpx 30rpx",t.borderRadius="round"===e.shape?`${u.size.radiusSize.base}rpx`:`${u.size.radiusSize.max}rpx`,t})),f=o((()=>{const t=a({});return t.height="100%",t.display="flex",t.flex="1 1 auto",t.fontSize=`${u.size.fonts.base}rpx`,t.textAlign=e.inputAlign,t.color=`${u.colors[i.mode].grey[9]}`,t})),p=t=>(e.maxLength&&t.length>Number(e.maxLength)&&(t=t.slice(0,Number(e.maxLength))),t);return uni.$on("changeMode",(e=>{i.mode=e})),{name:A,theme:u,rootStyle:c,inputBoxStyle:r,inputStyle:f,inputPlaceHolderStyle:d,onInput:e=>{let l=p(e.detail.value);t("update:modelValue",l,e),t("change",l,e)},onConfirm:()=>{t("search",e.modelValue)},onClickInput:e=>{t("click-input",e)},onFocus:e=>{t("focus",e)},onBlur:e=>{let l=p(e.detail.value);t("blur",l,e)},onClearable:e=>{t("update:modelValue","",e),t("change","",e),t("clear","")},onClickAction:e=>{t("update:modelValue","",e),t("click-action",e)},onClickLefticon:e=>{t("click-lefticon",e)},onClickRighticon:e=>{t("click-righticon",e)}}}}),[["render",function(t,l,a,o,n,V){const _=u(i("kui-text"),e),x=y,w=u(i("kui-icons"),S),C=b;return s(),c(x,{class:g(["kui-h-full kui-flex kui-items-center",t.name]),style:m(t.rootStyle)},{default:d((()=>[t.label?(s(),c(x,{key:0,class:"kui-mr-2"},{default:d((()=>[r(_,{size:`${t.theme.size.fonts.lg}${t.theme.size.fontUnit}`},{default:d((()=>[f(p(t.label),1)])),_:1},8,["size"])])),_:1})):k("",!0),r(x,{class:"kui-flex kui-items-center",style:m(t.inputBoxStyle)},{default:d((()=>{var e;return[t.$slots.lefticon||t.showLefticon?(s(),c(x,{key:0,class:"kui-mr-2",onClick:t.onClickLefticon},{default:d((()=>[h(t.$slots,"lefticon",{},(()=>[r(w,{weight:100,color:"grey",size:34,type:"search"})]))])),_:3},8,["onClick"])):k("",!0),r(x,{class:"kui-w-full",onClick:t.onClickInput},{default:d((()=>[r(C,{type:"text",placeholder:t.placeholder,style:m(t.inputStyle),"placeholder-style":t.inputPlaceHolderStyle,"confirm-type":t.confirmType,focus:t.autofocus,disabled:t.disabled,value:t.modelValue,onInput:t.onInput,onBlur:t.onBlur,onFocus:t.onFocus,onConfirm:t.onConfirm},null,8,["placeholder","style","placeholder-style","confirm-type","focus","disabled","value","onInput","onBlur","onFocus","onConfirm"])])),_:1},8,["onClick"]),(null==(e=t.modelValue)?void 0:e.length)>0&&t.clearable?(s(),c(x,{key:1,class:"kui-ml-2",onClick:t.onClearable},{default:d((()=>[h(t.$slots,"clearicon",{},(()=>[r(w,{weight:100,color:"grey",size:34,type:"cancel"})]))])),_:3},8,["onClick"])):k("",!0),t.$slots.righticon||t.showRighticon?(s(),c(x,{key:2,class:"kui-ml-2",onClick:t.onClickRighticon},{default:d((()=>[h(t.$slots,"righticon",{},(()=>[r(w,{weight:100,color:"grey",size:40,type:"mic1"})]))])),_:3},8,["onClick"])):k("",!0)]})),_:3},8,["style"]),t.showAction?(s(),c(x,{key:1,class:"kui-ml-2",onClick:t.onClickAction},{default:d((()=>[h(t.$slots,"action",{},(()=>[r(_,{size:`${t.theme.size.fonts.lg}${t.theme.size.fontUnit}`},{default:d((()=>[f("取消")])),_:1},8,["size"])]))])),_:3},8,["onClick"])):k("",!0)])),_:3},8,["class","style"])}]]);const j=B({setup(){const{proxy:e}=n(),t=e.$theme,l=V(""),o={state:a({show:!1,content:""})},u={state:a({value:""}),methods:{onClickInput(e){__f__("log","at pages/components/searchbar/searchbar.vue:103",e)}}},i={state:a({value:""}),methods:{onSearch(e){o.state.content=`搜索内容：${e}`,o.state.show=!0},onClickAction(e){o.state.content="取消",o.state.show=!0},onClickLefticon(e){o.state.content="左边图标点击事件触发",o.state.show=!0}}},s=V(""),c=V(""),d=V(""),r=V(""),f=V(""),p=V(!1);let k=V("light");return{theme:t,..._({baseValue:l,hiddenLefticonValue:s,inputAlignValue:c,disabledValue:d,customBackgroundValue:r,showAllIconValue:f,checked:p,mode:k}),clickState:u,eventState:i,toastState:o,clickInput:e=>{o.state.content="搜索框点击事件触发",o.state.show=!0},changeMode:()=>{k=p.value?"dark":"light",uni.$emit("changeMode",k)}}}},[["render",function(t,l,a,o,n,p){const k=u(i("kui-text"),e),m=u(i("kui-switch"),x),h=y,g=u(i("kui-cell-group"),w),b=u(i("kui-searchbar"),U),V=u(i("kui-space"),$),_=u(i("kui-page"),v),S=u(i("kui-toast"),z);return s(),c(h,{class:"kui-w-full"},{default:d((()=>[r(_,{paddingX:0,"custom-header":!1},{body:d((()=>[r(h,{class:"kui-w-full"},{default:d((()=>[r(V,{gap:[40,0],direction:"column"},{default:d((()=>[r(h,{class:"kui-mt-6 kui-h-full kui-flex kui-items-center kui-px-3"},{default:d((()=>[r(k,null,{default:d((()=>[f("暗黑模式：")])),_:1}),r(m,{modelValue:t.checked,"onUpdate:modelValue":l[0]||(l[0]=e=>t.checked=e),onChange:o.changeMode},null,8,["modelValue","onChange"])])),_:1}),r(h,{class:"kui-w-full"},{default:d((()=>[r(h,{class:"kui-px-3"},{default:d((()=>[r(g,{title:"基本用法"})])),_:1}),r(b,{modelValue:t.baseValue,"onUpdate:modelValue":l[1]||(l[1]=e=>t.baseValue=e)},null,8,["modelValue"])])),_:1}),r(h,{class:"kui-w-full"},{default:d((()=>[r(h,{class:"kui-px-3"},{default:d((()=>[r(g,{title:"事件监听",desc:"演示搜索事件/右边动作按钮点击事件/左边图标点击事件"})])),_:1}),r(b,{modelValue:o.eventState.state.value,"onUpdate:modelValue":l[2]||(l[2]=e=>o.eventState.state.value=e),"show-action":"",onSearch:o.eventState.methods.onSearch,onClickLefticon:o.eventState.methods.onClickLefticon,onClickAction:o.eventState.methods.onClickAction},null,8,["modelValue","onSearch","onClickLefticon","onClickAction"])])),_:1}),r(h,{class:"kui-w-full"},{default:d((()=>[r(h,{class:"kui-px-3"},{default:d((()=>[r(g,{title:"隐藏搜索图标",desc:"可通过插槽自定义图标"})])),_:1}),r(b,{modelValue:t.hiddenLefticonValue,"onUpdate:modelValue":l[3]||(l[3]=e=>t.hiddenLefticonValue=e),"show-lefticon":!1},null,8,["modelValue"])])),_:1}),r(h,{class:"kui-w-full"},{default:d((()=>[r(h,{class:"kui-px-3"},{default:d((()=>[r(g,{title:"搜索框文本对齐",desc:"input-align: left/center/right"})])),_:1}),r(b,{modelValue:t.inputAlignValue,"onUpdate:modelValue":l[4]||(l[4]=e=>t.inputAlignValue=e),"input-align":"center"},null,8,["modelValue"])])),_:1}),r(h,{class:"kui-w-full"},{default:d((()=>[r(h,{class:"kui-px-3"},{default:d((()=>[r(g,{title:"禁用搜索框",desc:"可以触发点击事件"})])),_:1}),r(b,{modelValue:t.disabledValue,"onUpdate:modelValue":l[5]||(l[5]=e=>t.disabledValue=e),disabled:"",onClickInput:o.clickInput},null,8,["modelValue","onClickInput"])])),_:1}),r(h,{class:"kui-w-full"},{default:d((()=>[r(h,{class:"kui-px-3"},{default:d((()=>[r(g,{title:"自定义样式",desc:"支持自定义搜索框外部背景色和搜索框背景色"})])),_:1}),r(b,{modelValue:t.customBackgroundValue,"onUpdate:modelValue":l[6]||(l[6]=e=>t.customBackgroundValue=e),background:`linear-gradient(to right, ${o.theme.colors.light.primary[5]}, ${o.theme.colors.light.primary[3]})`,"input-background":"grey"},null,8,["modelValue","background"])])),_:1}),r(h,{class:"kui-w-full"},{default:d((()=>[r(h,{class:"kui-px-3"},{default:d((()=>[r(g,{title:"显示全部图标"})])),_:1}),r(b,{modelValue:t.showAllIconValue,"onUpdate:modelValue":l[7]||(l[7]=e=>t.showAllIconValue=e),label:"地址","show-lefticon":"","show-righticon":"","show-action":""},null,8,["modelValue"])])),_:1}),r(h,{class:"kui-w-full"},{default:d((()=>[r(h,{class:"kui-px-3"},{default:d((()=>[r(g,{title:"搜索框点击事件监听"})])),_:1}),r(b,{modelValue:o.clickState.state.value,"onUpdate:modelValue":l[8]||(l[8]=e=>o.clickState.state.value=e),disabled:"",onClickInput:o.clickInput},null,8,["modelValue","onClickInput"])])),_:1})])),_:1}),r(h,{class:"kui-px-3 kui-w-full kui-box-border"},{default:d((()=>[r(g,{title:""},{default:d((()=>[r(k,{color:"hsl(213,10.00%, 56.86%)"},{default:d((()=>[f("示例数据为组件支持的部分数据，详细支持数据请参考组件源码和组件文档")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),r(S,{show:o.toastState.state.show,"onUpdate:show":l[9]||(l[9]=e=>o.toastState.state.show=e),content:o.toastState.state.content},null,8,["show","content"])])),_:1})}]]);export{j as default};
