import{x as e,r as t,A as l,y as r,g as i,e as a,i as o,c,d as s,w as n,f as u,q as d,s as p,z as f,h as y,B as k,j as m,V as b,n as g,C as x}from"./index.4769b127.js";import{_ as h}from"./kui-text.d338fb2c.js";import{_}from"./kui-icons.3c452229.js";import{_ as C}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as S}from"./kui-cell-group.bf65a318.js";import{_ as I}from"./kui-button.fcbf8c10.js";import{_ as v}from"./kui-space.2c8c8efa.js";import{_ as z}from"./kui-page.12878643.js";import"./kui-spin.40ca1a3c.js";const T=C(e({name:"kui-progress",props:{type:{type:String,default:"linear"},percent:{type:Number,default:0},label:{type:Boolean,default:!0},labelInside:{type:Boolean,default:!1},insideLabelStyle:{type:Object,default:{}},shape:{type:String,default:"round"},color:{type:String,default:"#00BC79"},trackColor:{type:String,default:""},lineWidth:{type:Number,default:20},track:{type:Boolean,default:!0},size:{type:Number,default:200},rotate:{type:String,default:""},labelTextSize:{type:Number,default:14},labelTextColor:{type:String,default:""},active:{type:Boolean,default:!1},iconName:{type:String,default:""},labelInsideTextBottom:{type:String,default:""},id:{type:String,default:""}},setup(e,a){const{proxy:o}=i(),c=o.$theme,s=t({labelTextSize:e.labelTextSize,labelTextColor:"",lineWidth:e.lineWidth,backgroundColor:e.color,backgroundImage:"",labelInsideTextBottom:"",percent:e.percent<0?0:e.percent,ctx_e:null,z:0,canvasId:"",canvasId2:"",sAngle:null,loadOK:!1,timer:null,animation:{step:1,transEnd:300}});s.percent=e.percent>100?100:s.percent;const n=l((()=>{const l=t({});return s.lineWidth=e.lineWidth,l.height=`${s.lineWidth}rpx`,l.borderRadius=`${s.lineWidth}px`,"square"===e.shape&&(l.borderRadius="5rpx"),s.labelTextColor=e.labelTextColor?e.labelTextColor:c.colors.light.grey[7],s.labelTextColor=c.colors.light[e.labelTextColor]?c.colors.light[e.labelTextColor][5]:s.labelTextColor,l})),u=l((()=>{const l=t({});return l.backgroundColor=e.trackColor?e.trackColor:c.colors.dark.grey[8],l})),d=l((()=>{const l=t({});return l.width=`${s.percent}%`,s.backgroundImage=c.colors.light[e.color]?`linear-gradient(to right, ${c.colors.light[e.color][5]}, ${c.colors.light[e.color][4]})`:s.backgroundColor,l.backgroundColor=s.backgroundColor,l.backgroundImage=s.backgroundImage,l.transition="all 0.4s ease",l})),p=l((()=>{const e=t({});return e.fontSize=`${c.size.fonts.sm}${c.size.fontUnit}`,e})),f=l((()=>{const l=t({}),r=1.5*e.lineWidth;return l.height=`${r}rpx`,l.width="70rpx",e.lineWidth<20&&(l.height="30rpx"),l.borderRadius="10rpx",l.backgroundColor=s.backgroundColor,l.backgroundImage=s.backgroundImage,l})),y=l((()=>{const l=t({}),r=e.labelInsideTextBottom?e.labelInsideTextBottom:"";return l.bottom=r,l}));uni.getSystemInfoSync().pixelRatio;const k=l((()=>{const l=t({});return l.width=l.height=`${e.size}px`,l.zoom=.5,l})),m=(t,l=!0)=>{const r=e.trackColor?e.trackColor:c.colors.dark.grey[8],i=Math.PI/20*(s.percent/100*20)*2;__f__("log","at components/kui-progress/kui-progress.vue:217",i),Math.PI,s.percent;let a=0,o=s.animation.transEnd||200;s.timer=setInterval((()=>{if(s.loadOK=!0,a>o)clearInterval(s.timer);else{t.clearRect(0,0,e.size,e.size);let l=i/o*a;b(t,{x:e.size/2,y:e.size/2,radius:e.size/2-e.lineWidth,sAngle:-Math.PI,eAngle:Math.PI,counterclockwise:!1,fillColor:r,lineWidth:e.lineWidth}),b(t,{x:e.size/2,y:e.size/2,radius:e.size/2-e.lineWidth,sAngle:-Math.PI,eAngle:-Math.PI+l,counterclockwise:!1,fillColor:s.backgroundColor,lineWidth:e.lineWidth}),a+=s.animation.step||1,t.draw()}}),0)},b=(e,t)=>{const{x:l,y:r,radius:i,sAngle:a,eAngle:o,counterclockwise:c,lineWidth:s,fillColor:n}=t;let u=e.createLinearGradient(0,0,0,0);e.beginPath(),e.lineWidth=s,e.strokeStyle=n,e.lineCap="round",e.setFillStyle(u),e.arc(l,r,i,a,o,c),e.stroke()},g=()=>{setTimeout((()=>{m(s.ctx_e)}),200)};if("circle"===e.type){const t="progress-circle";s.canvasId=e.id?`${t}-${e.id}`:t,uni.createCanvasContext(s.canvasId2,o),uni.createSelectorQuery().in(o).select(`#${s.canvasId}`),e.trackColor?e.trackColor:c.colors.dark.grey[8],s.ctx_e=uni.createCanvasContext(s.canvasId,o),g()}return r((()=>e.percent),(t=>t<0?(s.percent=0,!1):t>100?(s.percent=100,!1):void setTimeout((()=>{s.percent=t,"circle"===e.type&&m(s.ctx_e),__f__("log","at components/kui-progress/kui-progress.vue:320",s.percent)}),200))),{commonStyle:n,rootStyle:u,contentStyle:d,labelStyle:p,labelInsideStyle:f,labelInsideTextStyle:y,circleStyle:k,fillRing:b,initDraw:g,state:s}}}),[["render",function(e,t,l,r,i,g){const x=m,C=a(o("kui-text"),h),S=a(o("kui-icons"),_),I=b;return c(),s(x,null,{default:n((()=>["linear"===e.type?(c(),s(x,{key:0,class:"kui-flex kui-items-center"},{default:n((()=>[u(x,{class:"kui-progress kui-relative kui-w-full",style:d([e.commonStyle,e.rootStyle])},{default:n((()=>[u(x,{class:"kui-flex"},{default:n((()=>[u(x,{class:"kui-absolute kui-h-full progress",style:d([e.commonStyle,e.contentStyle])},{default:n((()=>[e.active?(c(),s(x,{key:0,class:"kui-progress-active"})):p("",!0)])),_:1},8,["style"]),e.labelInside?(c(),s(x,{key:0,class:"kui-flex kui-flex-col kui-justify-center kui-absolute",style:d([{top:"-25%"},[{left:e.state.percent-5+"%",top:(e.lineWidth<20?-100:-25)+"%"},e.insideLabelStyle]])},{default:n((()=>[f(e.$slots,"default",{},(()=>[u(x,{style:d(e.labelInsideStyle)},{default:n((()=>[u(x,{class:"kui-relative kui-flex kui-justify-center kui-items-center kui-h-full",style:d(e.labelInsideTextStyle)},{default:n((()=>[u(C,{size:"12px",color:"white"},{default:n((()=>[y(k(e.state.percent)+"% ",1)])),_:1})])),_:1},8,["style"])])),_:1},8,["style"])]),!0)])),_:3},8,["style"])):p("",!0)])),_:3})])),_:3},8,["style"]),!e.label||e.labelInside||e.iconName?p("",!0):(c(),s(x,{key:0,class:"kui-ml-1",style:d(e.labelStyle)},{default:n((()=>[u(C,{size:`${e.state.labelTextSize}px`,color:e.state.labelTextColor},{default:n((()=>[y(k(e.state.percent)+"% ",1)])),_:1},8,["size","color"])])),_:1},8,["style"])),e.iconName?(c(),s(x,{key:1,class:"kui-ml-1",style:d(e.labelStyle)},{default:n((()=>[u(S,{type:e.iconName,size:e.state.labelTextSize,color:e.state.labelTextColor},null,8,["type","size","color"])])),_:1},8,["style"])):p("",!0)])),_:3})):p("",!0),"circle"===e.type?(c(),s(x,{key:1,class:"kui-relative"},{default:n((()=>[u(I,{class:"kui-progress-circle kui-absolute1",id:e.state.canvasId,"canvas-id":e.state.canvasId,style:d(e.circleStyle)},null,8,["id","canvas-id","style"]),u(x,{class:"kui-absolute kui-w-full kui-h-full kui-flex kui-justify-center kui-items-center kui-transform",style:d([{transform:"scale(2)",left:"0",top:"0"},e.circleStyle])},{default:n((()=>[f(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3})):p("",!0)])),_:3})}],["__scopeId","data-v-dd6b13fc"]]);const P=C({setup(){const e=t({perecnt:0,circlePercent:0});return{state:e,add:(t="")=>{g((()=>{"circle"===t?(e.circlePercent=e.circlePercent+20,e.circlePercent=e.circlePercent>100?100:e.circlePercent):(e.perecnt=e.perecnt+20,e.perecnt=e.perecnt>100?100:e.perecnt),__f__("log","at pages/components/progress/progress.vue:88",e.circlePercent)}))},decrease:(t="")=>{g((()=>{"circle"===t?(e.circlePercent=e.circlePercent-20,e.circlePercent=e.circlePercent<0?0:e.circlePercent):(e.perecnt=e.perecnt-20,e.perecnt=e.perecnt<0?0:e.perecnt)}))}}}},[["render",function(e,t,l,r,i,d){const f=a(o("kui-progress"),T),k=a(o("kui-cell-group"),S),b=m,g=a(o("kui-icons"),_),x=a(o("kui-button"),I),h=a(o("kui-space"),v),C=a(o("kui-page"),z);return c(),s(C,{"custom-header":!1},{body:n((()=>[u(h,{gap:[50,0],direction:"column"},{default:n((()=>[u(k,{title:"基本用法"},{default:n((()=>[u(f,{percent:30,color:"primary"})])),_:1}),u(k,{title:"设置宽度和颜色"},{default:n((()=>[u(f,{percent:30,"line-width":30,color:"warning","label-text-color":"orange"})])),_:1}),u(k,{title:"不显示百分比"},{default:n((()=>[u(f,{percent:30,color:"primary",label:!1})])),_:1}),u(k,{title:"标签内显"},{default:n((()=>[u(b,{class:"kui-mb-3"},{default:n((()=>[u(f,{percent:30,"line-width":10,color:"primary","label-inside":"","label-inside-text-bottom":"1px"})])),_:1}),u(b,{class:"kui-mt-5"},{default:n((()=>[u(f,{percent:50,"line-width":20,color:"primary","label-inside-text-bottom":"1px","label-inside":""})])),_:1}),u(b,{class:"kui-mt-5"},{default:n((()=>[u(f,{percent:70,"line-width":30,color:"primary","label-inside":"","label-inside-text-bottom":"2px"})])),_:1})])),_:1}),u(k,{title:"自定义内容內显"},{default:n((()=>[u(f,{percent:50,"label-inside":"","inside-label-style":{bottom:"0px"}},{default:n((()=>[u(g,{type:"heart",theme:"danger",size:50})])),_:1})])),_:1}),u(k,{title:"开启进度条动画"},{default:n((()=>[u(f,{percent:30,color:"primary",active:""})])),_:1}),u(k,{title:"自定义图标"},{default:n((()=>[u(f,{percent:30,color:"primary","icon-name":"check_circle","label-text-color":"primary","label-text-size":36})])),_:1}),u(k,{title:"方形进度条"},{default:n((()=>[u(f,{percent:30,shape:"square",color:"primary"})])),_:1}),u(k,{title:"动态改变"},{default:n((()=>[u(f,{percent:r.state.perecnt,color:"#00BC79"},null,8,["percent"]),u(b,{class:"kui-flex kui-justify-center kui-mt-3"},{default:n((()=>[u(x,{onClick:r.decrease},{default:n((()=>[y("减少")])),_:1},8,["onClick"]),u(b,{class:"kui-mx-1"}),u(x,{type:"primary",onClick:r.add},{default:n((()=>[y("增加")])),_:1},8,["onClick"])])),_:1})])),_:1}),p("",!0)])),_:1})])),_:1})}]]);export{P as default};
