import{_ as e}from"./kui-text.d338fb2c.js";import{v as t,x as o,r as s,y as a,k as l,g as i,e as c,i as n,c as r,d as u,w as d,f as m,D as h,h as k,B as p,s as f,G as C,I as g,H as y,m as _,q as S,j as w}from"./index.4769b127.js";import{_ as b}from"./kui-switch.5419dd7d.js";import{_ as v}from"./kui-cell.8246ece5.js";import{_ as x}from"./kui-cell-group.bf65a318.js";import{_ as j}from"./kui-space.2c8c8efa.js";import{c as I,_ as O}from"./kui-page.12878643.js";import{_ as B}from"./kui-icons.3c452229.js";import{_ as T}from"./kui-animation.1c71067a.js";import{_ as V}from"./kui-popup.6cc4c5f3.js";import{_ as $}from"./_plugin-vue_export-helper.cdc0426e.js";import"./kui-overlay.4319bfe8.js";const A=$(o({name:"kui-actionsheet",props:{show:{type:Boolean,default:!1},actions:{type:Array,default:[]},title:{type:String,default:""},description:{type:String,default:""},cancelText:{type:String,default:""},closeOnClickOverlay:{type:Boolean,default:!0},chooseItemColor:{type:String,default:"primary"},chooseItemValue:{type:String,default:""},mode:{type:String,default:()=>{var e,o;return null!=(o=null==(e=t(I,void 0))?void 0:e.mode)?o:"light"}}},emits:["update:show","choose","cancel","close"],setup(e,t){const{proxy:o}=i(),c=o.$theme,n=s({closeOnClickOverlay:e.closeOnClickOverlay,itemBackgroundColor:"white",mode:e.mode});a((()=>[e.show]),(t=>{if(t[0]){if(e.actions.length<2)return __f__("warn","at components/kui-actionsheet/kui-actionsheet.vue:90","actionsheet-debug: actions配置错误"),!1;o.$refs.popupActionsheet.open()}}));const r=()=>{"light"===n.mode&&(n.itemBackgroundColor="white"),"dark"===n.mode&&(n.itemBackgroundColor=c.colors[n.mode].grey[1])};return l((()=>{r()})),uni.$on("changeMode",(e=>{n.mode=e,r()})),{itemStyle:t=>{const o=s({});return o.backgroundColor=n.itemBackgroundColor,t>=0&&e.actions.length&&t<e.actions.length-1&&(o.borderBottom=`1rpx solid ${c.colors[n.mode].grey[2]}`),0!==t||e.title||(o.borderTopLeftRadius=o.borderTopRightRadius=`${c.size.radiusSize.base}rpx`),o},closedPopup:e=>{t.emit("close",e),t.emit("update:show",!1)},onChoose:(e,s)=>{if(e.disable||e.loading)return!1;o.$refs.popupActionsheet.forceClose(),t.emit("choose",e,s)},closeOverlay:()=>{t.emit("cancel"),o.$refs.popupActionsheet.forceClose()},getItemColor:t=>{let o=t.color;return e.chooseItemValue===t.name&&(o=e.chooseItemColor?e.chooseItemColor:c.colors[n.mode].primary[5]),"dark"===n.mode&&(o=e.chooseItemValue===t.name?c.colors.dark[e.chooseItemColor][5]:c.colors.dark.grey[8]),t.disable&&(o=c.colors[n.mode].grey[9]),o},state:n,theme:c}}}),[["render",function(t,o,s,a,l,i){const b=c(n("kui-text"),e),v=w,x=c(n("kui-icons"),B),j=c(n("kui-animation"),T),I=c(n("kui-popup"),V);return r(),u(v,{class:"kui-actionsheet"},{default:d((()=>[m(I,{ref:"popupActionsheet","close-on-click-mask":t.state.closeOnClickOverlay,height:"200rpx",position:"bottom",onClose:t.closedPopup},{default:d((()=>[t.title?(r(),u(v,{key:0},{default:d((()=>[m(v,{class:"kui-py-3 kui-flex kui-flex-col kui-justify-center kui-items-center kui-border-0 kui-border-b-rpx kui-border-solid kui-border-gray-200",onClick:o[0]||(o[0]=h((()=>{}),["stop"]))},{default:d((()=>[m(b,{color:t.getItemColor({})},{default:d((()=>[k(p(t.title),1)])),_:1},8,["color"]),t.description?(r(),u(v,{key:0,class:"kui-text-gray-400"},{default:d((()=>[m(v,{class:"kui-mt-1"}),m(b,null,{default:d((()=>[k(p(t.description),1)])),_:1})])),_:1})):f("",!0)])),_:1})])),_:1})):f("",!0),(r(!0),C(g,null,y(t.actions,((e,o)=>(r(),u(v,{key:o,class:_(["kui-py-3 kui-flex kui-flex-col kui-justify-center kui-items-center",[e.disable?"disable":""]]),"hover-class":e.disable||e.loading?"":"kui-bg-gray-200",style:S([t.itemStyle(o)]),onClick:h((s=>t.onChoose(e,o)),["stop"])},{default:d((()=>[e.loading?(r(),u(j,{key:1,name:"rotate-center",duration:1,runing:"",infinite:""},{default:d((()=>[m(x,{type:"spinner6",size:36,color:"grey"})])),_:1})):(r(),u(b,{key:0,color:t.getItemColor(e),mode:t.mode},{default:d((()=>[k(p(e.name),1)])),_:2},1032,["color","mode"])),e.description?(r(),u(v,{key:2,class:"kui-text-gray-400"},{default:d((()=>[m(v,{class:"kui-mt-1"}),m(b,null,{default:d((()=>[k(p(e.description),1)])),_:2},1024)])),_:2},1024)):f("",!0)])),_:2},1032,["hover-class","class","style","onClick"])))),128)),t.cancelText?(r(),u(v,{key:1},{default:d((()=>[m(v,{class:"kui-w-full kui-h-2",style:S({backgroundColor:t.theme.colors[t.state.mode].grey[2]})},null,8,["style"]),m(v,{class:"kui-py-3 kui-flex kui-justify-center kui-items-center","hover-class":"kui-bg-gray-200",onClick:t.closeOverlay},{default:d((()=>[m(b,{color:t.getItemColor({})},{default:d((()=>[k(p(t.cancelText),1)])),_:1},8,["color"])])),_:1},8,["onClick"])])),_:1})):f("",!0)])),_:1},8,["close-on-click-mask","onClose"])])),_:1})}],["__scopeId","data-v-06c525c8"]]);const U=$({setup(){const e={state:s({show:!1,actions:[{name:"选项一"},{name:"选项二"},{name:"选项三"}],val:""}),methods:{onClick(){e.state.show=!0},onChoose(t){e.state.val=t.name}}},t={state:s({...e.state,cancelText:"取消"}),methods:{onClick(){t.state.show=!0},onChoose(e){t.state.val=e.name}}},o={state:s({show:!1,actions:[{name:"选项一"},{name:"选项二",description:"这是描述信息",color:"#00BC79"},{name:"选项三"}],title:"这是标题",description:"这是描述信息",val:""}),methods:{onClick(){o.state.show=!0},onChoose(e){o.state.val=e.name}}},a={state:s({show:!1,actions:[{name:"选中选项"},{name:"加载选项",loading:!0},{name:"禁用选项",disable:!0}],chooseItemValue:"选中选项",val:""}),methods:{onClick(){a.state.show=!0},onChoose(e){a.state.val=e.name}}},l=s({mode:"light",modeChecked:!1});return{baseState:e,state:l,cancelState:t,descState:o,statusState:a,changeMode:()=>{l.mode="light"==l.mode?"dark":"light",uni.$emit("changeMode",l.mode)}}}},[["render",function(t,o,s,a,l,i){const h=c(n("kui-text"),e),f=c(n("kui-switch"),b),C=w,g=c(n("kui-cell"),v),y=c(n("kui-cell-group"),x),_=c(n("kui-space"),j),S=c(n("kui-page"),O),I=c(n("kui-actionsheet"),A);return r(),u(C,null,{default:d((()=>[m(S,{"custom-header":!1},{body:d((()=>[m(C,{class:"kui-w-full kui-h-full"},{default:d((()=>[m(C,{class:"kui-my-3 kui-flex"},{default:d((()=>[m(h,null,{default:d((()=>[k("暗黑模式：")])),_:1}),m(f,{modelValue:a.state.modeChecked,"onUpdate:modelValue":o[0]||(o[0]=e=>a.state.modeChecked=e),onChange:a.changeMode},null,8,["modelValue","onChange"])])),_:1}),m(_,{gap:[30,0],direction:"column"},{default:d((()=>[m(y,{title:"基本用法"},{default:d((()=>[m(g,{title:"基本用法",onClick:a.baseState.methods.onClick},{"right-icon":d((()=>[m(h,null,{default:d((()=>[k(p(a.baseState.state.val),1)])),_:1})])),_:1},8,["onClick"]),m(g,{title:"展示取消按钮",onClick:a.cancelState.methods.onClick},{"right-icon":d((()=>[m(h,null,{default:d((()=>[k(p(a.cancelState.state.val),1)])),_:1})])),_:1},8,["onClick"]),m(g,{title:"展示标题和描述",onClick:a.descState.methods.onClick},{"right-icon":d((()=>[m(h,null,{default:d((()=>[k(p(a.descState.state.val),1)])),_:1})])),_:1},8,["onClick"])])),_:1}),m(y,{title:"选项状态"},{default:d((()=>[m(g,{title:"不同选项状态",onClick:a.statusState.methods.onClick},{"right-icon":d((()=>[m(h,null,{default:d((()=>[k(p(a.statusState.state.val),1)])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),m(I,{show:a.baseState.state.show,"onUpdate:show":o[1]||(o[1]=e=>a.baseState.state.show=e),actions:a.baseState.state.actions,onChoose:a.baseState.methods.onChoose},null,8,["show","actions","onChoose"]),m(I,{show:a.cancelState.state.show,"onUpdate:show":o[2]||(o[2]=e=>a.cancelState.state.show=e),actions:a.cancelState.state.actions,cancelText:a.cancelState.state.cancelText,onChoose:a.cancelState.methods.onChoose},null,8,["show","actions","cancelText","onChoose"]),m(I,{show:a.descState.state.show,"onUpdate:show":o[3]||(o[3]=e=>a.descState.state.show=e),actions:a.descState.state.actions,description:a.descState.state.description,title:a.descState.state.title,onChoose:a.descState.methods.onChoose},null,8,["show","actions","description","title","onChoose"]),m(I,{show:a.statusState.state.show,"onUpdate:show":o[4]||(o[4]=e=>a.statusState.state.show=e),"choose-item-value":a.statusState.state.chooseItemValue,actions:a.statusState.state.actions,onChoose:a.statusState.methods.onChoose},null,8,["show","choose-item-value","actions","onChoose"])])),_:1})}]]);export{U as default};
