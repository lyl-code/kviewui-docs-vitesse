import{_ as e}from"./kui-text.d338fb2c.js";import{v as l,x as t,r as a,T as u,a1 as o,A as r,k as i,g as s,e as d,i as n,c as m,d as c,w as h,f as p,q as f,h as k,B as V,s as b,m as y,D as g,z as v,G as _,I as S,H as C,j as x,N as w}from"./index.4769b127.js";import{c as T,_ as U}from"./kui-page.12878643.js";import{g as z,u as A}from"./element.bd39bbbe.js";import{_ as j}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as R}from"./kui-cell-group.bf65a318.js";import{_ as $}from"./kui-space.2c8c8efa.js";import{_ as M}from"./kui-toast.f1760cdf.js";import"./kui-icons.3c452229.js";import"./kui-animation.1c71067a.js";const W={modelValue:{type:[String,Number,Array],default:""},currentValue:{type:[String,Number,Array],default:""},max:{type:[String,Number],default:100},min:{type:[String,Number],default:0},step:{type:[String,Number],default:1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},trackHeight:{type:Number,default:12},thumbSize:{type:Number,default:30},range:{type:Boolean,default:!1},rules:{type:Object,default:{}},mode:{type:String,default:()=>{var e,t;return null!=(t=null==(e=l(T,void 0))?void 0:e.mode)?t:"light"}},showRange:{type:Boolean,default:!1},hiddenLabel:{type:Boolean,default:!1},hiddenActiveRipple:{type:Boolean,default:!1},themeColor:{type:String,default:"primary"},inactiveColor:{type:String,default:""},thumbColor:{type:String,default:""},activeColor:{type:String,default:""}};const I=j(t({name:"kui-slider",props:W,emits:["update:modelValue","update:currentValue","change"],setup(e,{emit:l}){const{proxy:t}=s(),d=t.$theme,n=a({rippleActive:!1,modelValue:e.modelValue,currentValue:e.modelValue,error:!1,themeColor:e.themeColor}),m=`${z()}_slider`,c=u(null);let h=0,p=!1,f=n.modelValue,k=u(0);const V=l=>e.range&&Array.isArray(e.modelValue);let b=o(e.max)-o(e.min);const y=u(0),g=r((()=>{const l=a({});return l.height=`${e.trackHeight}rpx`,l.borderRadius=l.height,l}));let v,_,S;const C=()=>{var l;v=null!=(l=d.colors[e.mode][n.themeColor])?l:uni.kviewUIColor.generate(n.themeColor,{list:!0,dark:"dark"===e.mode}),_=e.inactiveColor?e.inactiveColor:v[1],S=e.activeColor?e.activeColor:v[5]};C();let x,w;i((()=>{setTimeout((()=>{A(c,"sliderWrap").then((e=>{h=e.width,x=e.left}))}))})),w=V(e.modelValue)?[0,0]:0;let T,U,j=0,R=o(e.modelValue);V(e.modelValue)&&(R=[o(e.modelValue[0]),o(e.modelValue[1])]);const $=(t="touchmove")=>{var a;e.rules&&e.rules.message&&!e.range&&(n.error=(a=+n.currentValue,!e.rules.validator(a)),n.error?(n.themeColor="danger",C()):(n.themeColor=e.themeColor,C())),l("change",{type:t,error:n.error,range:e.range,value:n.currentValue})},M=(l=0)=>e.range?e.modelValue[l]/b*100+"%":(+e.modelValue-+e.min)/b*100+"%",W=(t,a=y.value,u=n.modelValue)=>{let o;V(e.modelValue)?(u[a]=Math.abs(+t),f=u,o=u,n.currentValue=(e=>n.modelValue[0]>n.modelValue[1]?(e.slice(0).reverse(),e.slice(0).reverse()):e)(o)):(o=(l=>{const{min:t,max:a,step:u}=e;return l=Math.max(+t,Math.min(l,+a)),Math.round(l/+u)*+u})(+t),n.currentValue=o),l("update:currentValue",n.currentValue),l("update:modelValue",o)};return{theme:d,name:"kui-slider",elId:m,state:n,activeIndex:y,getActiveIndex:()=>{let e=0;return f[0]>=f[1]&&(e=1),__f__("log","at components/kui-slider/kui-slider.vue:194",e),e},commonStyle:g,wrapStyle:()=>{const l=a({});return l.backgroundColor=(e.disabled,_),l},sliderStyle:(l=0)=>{const t=a({});if(V(e.modelValue)){t.width=Math.abs(n.currentValue[1]-n.currentValue[0])/b*100+"%";let l=n.currentValue[0]<n.currentValue[1]?0:1;t.left=Math.abs(n.currentValue[l]-+e.min)/b*100+"%"}else t.width=M(l),t.left="0%";return e.activeColor.indexOf("linear-gradient")>-1?t.backgroundImage=S:t.backgroundColor=S,t.opacity=e.disabled?.7:1,p&&(t.transition="all 0.25s"),t},thumbWrapperStyle:(e=0)=>{const l=a({});return l.top="50%",l.left=M(e),l.transform="translate3d(-50%, -50%, 0)",p&&(l.transition="all 0.25s"),l},thumbStyle:()=>{let l=e.thumbColor?e.thumbColor:v[5];const t=a({});return t.width=t.height=t.borderRadius=`${e.thumbSize}rpx`,t.backgroundColor=l,__f__("log","at components/kui-slider/kui-slider.vue:260",v[5],l),e.disabled&&(e.thumbColor?t.opacity=.9:t.backgroundColor=v[3]),t},rippleStyle:(l=0)=>{const t=a({});return t.width=0,t.height=0,t.left=M(y.value),p&&(t.transition="all 0.25s"),n.rippleActive&&y.value===l?t.width=t.height=2.75*e.thumbSize+"rpx":t.width=t.height=0,t.backgroundColor=S,t.opacity=.3,t},labelStyle:(l=0)=>{const t=a({});return t.width=t.height=1.5*e.thumbSize+"rpx",t.borderRadius="50% 50% 0",e.activeColor.indexOf("linear-gradient")>-1?t.backgroundImage=S:t.backgroundColor=S,t.opacity=e.disabled?.7:1,t.top=`-${1.5*e.thumbSize+2*e.trackHeight+5}rpx`,t.left=M(l),t.transform=`translateX(-${1.5*e.thumbSize/2+1.5}rpx) rotate(45deg)`,t.padding="3rpx",p&&(t.transition="all 0.25s"),t},onTouchStart:l=>{e.disabled||e.readonly||(k=y.value,p=!0,V(e.modelValue)?(w[k]=l.touches[0].clientX,R[k]=e.modelValue[k]):(w=l.touches[0].clientX,R=e.modelValue),n.rippleActive=!0)},onTouchMove:l=>{e.disabled||e.readonly||(j=l.touches[0].clientX,p=!1,V(e.modelValue)?(U=(j-w[y.value])/h*b,T=Math.ceil(R[y.value]+U)):(U=(j-+w)/h*b,T=Math.ceil(+R+U)),T>=e.min&&T<=e.max&&W(T),l.stopPropagation(),l.preventDefault())},onTouchEnd:e=>{$("touchmove"),e.stopPropagation(),e.preventDefault(),n.rippleActive=!1},onClick:l=>{if(!e.disabled&&!e.readonly){if(V(e.modelValue)?R[y.value]=n.currentValue[y.value]:R=e.modelValue,j=l.touches[0].clientX,U=(j-x)/h*b,T=Math.ceil(U),T>=e.min&&T<=e.max){p=!0;let e=0;T<n.currentValue[0]?e=0:(T>n.currentValue[1]||T>(n.currentValue[0]+n.currentValue[1])/2)&&(e=1),W(T,e,n.currentValue)}$("click")}},sliderWrap:c}}}),[["render",function(l,t,a,u,o,r){const i=d(n("kui-text"),e),s=x;return m(),c(s,{class:y(l.name)},{default:h((()=>[p(s,{class:"kui-flex kui-h-full kui-items-center"},{default:h((()=>[l.showRange?(m(),c(s,{key:0,class:"kui-mr-3",style:f({...l.commonStyle})},{default:h((()=>[p(i,null,{default:h((()=>[k(V(l.min),1)])),_:1})])),_:1},8,["style"])):b("",!0),p(s,{class:y(["kui-w-full kui-relative kui-box-border kui-mt-3",l.name])},{default:h((()=>[p(s,{class:"kui-w-full kui-box-border","disable-scroll":"",id:"sliderWrap",ref:"sliderWrap",onClick:g(l.onClick,["stop","prevent"]),style:f({...l.commonStyle,...l.wrapStyle()})},{default:h((()=>[l.range?(m(!0),_(S,{key:1},C(l.modelValue,((e,a)=>(m(),c(s,{key:a},{default:h((()=>[p(s,{class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-h-full",style:f({...l.commonStyle,...l.sliderStyle(a)})},null,8,["style"]),l.hiddenActiveRipple?b("",!0):(m(),c(s,{key:0,class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-border-0 kui-rounded-full",style:f({...l.thumbWrapperStyle(a),...l.rippleStyle(a)})},null,8,["style"])),p(s,{class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-border-0",role:"slider","catch-move":!0,tabindex:l.disabled||l.readonly?void 0:0,"aria-valuemin":l.min,"aria-valuemax":l.max,"aria-disabled":l.disabled,"aria-readonly":l.readonly,"aria-orientation":"horizontal",id:`slider-${a}`,onTouchstart:g((e=>{l.activeIndex=a,l.onTouchStart(e)}),["stop","prevent"]),onTouchmove:g(l.onTouchMove,["stop","prevent"]),onTouchend:g(l.onTouchEnd,["stop","prevent"]),onClick:t[1]||(t[1]=g((e=>{e.stopPropagation()}),["stop","prevent"])),style:f(l.thumbWrapperStyle(a))},{default:h((()=>[v(l.$slots,"thumb",{},(()=>[p(s,{style:f(l.thumbStyle())},null,8,["style"])]))])),_:2},1032,["tabindex","aria-valuemin","aria-valuemax","aria-disabled","aria-readonly","id","onTouchstart","onTouchmove","onTouchend","style"]),l.hiddenLabel?b("",!0):(m(),c(s,{key:1,class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-flex kui-justify-center kui-items-center",style:f({...l.thumbWrapperStyle(a),...l.labelStyle(a)})},{default:h((()=>[p(s,{class:"kui-transform -kui-rotate-45"},{default:h((()=>[p(i,{color:l.theme.colors[l.mode].grey[0],size:`${l.theme.size.fonts.sm}rpx`},{default:h((()=>[k(V(l.modelValue[a]),1)])),_:2},1032,["color","size"])])),_:2},1024)])),_:2},1032,["style"]))])),_:2},1024)))),128)):(m(),c(s,{key:0},{default:h((()=>[p(s,{class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-h-full",style:f({...l.commonStyle,...l.sliderStyle()})},null,8,["style"]),l.hiddenActiveRipple?b("",!0):(m(),c(s,{key:0,class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-border-0 kui-rounded-full",style:f({...l.thumbWrapperStyle(),...l.rippleStyle(0)})},null,8,["style"])),p(s,{class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-border-0",role:"slider","catch-move":!0,tabindex:l.disabled||l.readonly?void 0:0,"aria-valuemin":l.min,"aria-valuemax":l.max,"aria-disabled":l.disabled,"aria-readonly":l.readonly,"aria-orientation":"horizontal",onTouchstart:g(l.onTouchStart,["stop","prevent"]),onTouchmove:g(l.onTouchMove,["stop","prevent"]),onTouchend:g(l.onTouchEnd,["stop","prevent"]),onClick:t[0]||(t[0]=g((e=>e.stopPropagation()),["stop","prevent"])),style:f(l.thumbWrapperStyle())},{default:h((()=>[v(l.$slots,"thumb",{},(()=>[p(s,{style:f(l.thumbStyle())},null,8,["style"])]))])),_:3},8,["tabindex","aria-valuemin","aria-valuemax","aria-disabled","aria-readonly","onTouchstart","onTouchmove","onTouchend","style"]),l.hiddenLabel?b("",!0):(m(),c(s,{key:1,class:"kui-absolute kui-inset-l-0 kui-inset-t-0 kui-flex kui-justify-center kui-items-center",style:f({...l.thumbWrapperStyle(),...l.labelStyle()})},{default:h((()=>[p(s,{class:"kui-transform -kui-rotate-45"},{default:h((()=>[p(i,{color:l.theme.colors[l.mode].grey[0],size:`${l.theme.size.fonts.sm}rpx`},{default:h((()=>[k(V(l.modelValue),1)])),_:1},8,["color","size"])])),_:1})])),_:1},8,["style"]))])),_:3}))])),_:3},8,["onClick","style"])])),_:3},8,["class"]),l.showRange?(m(),c(s,{key:1,class:"kui-ml-2",style:f({...l.commonStyle})},{default:h((()=>[p(i,null,{default:h((()=>[k(V(l.max),1)])),_:1})])),_:1},8,["style"])):b("",!0)])),_:3}),l.state.error?(m(),c(s,{key:0,class:"kui-mt-2"},{default:h((()=>[v(l.$slots,"error",{},(()=>[p(i,{color:"danger"},{default:h((()=>[k(V(l.rules.message),1)])),_:1})]))])),_:3})):b("",!0)])),_:3},8,["class"])}]]);const N=j({setup(){const e=u(0),l=u([20,60]),t=u(0),o=u(20),r=u(20),i=u(0),s=u(0),d=u(0),n=u([0,0,0,0,0,0]),m=u(20),c=u([20,20]),h={state:a({value:20,toast:{show:!1,content:""}}),methods:{onChange(e){e&&(h.state.toast.content=`当前值：${e.value}`,h.state.toast.show=!0)}}},p={state:a({value:20}),rules:{validator:e=>e>20,message:"值必须大于20"},methods:{onChange(e){__f__("log","at pages/components/slider/slider.vue:172",e)}}};return{...w({baseValue:e,rangeValue:l,customRangeValue:t,disableValue:o,readonlyValue:r,customStepValue:i,hiddenLabelValue:s,hiddenActiveRipple:d,customThemeColorValue:n,customStyleValue:m,customThumbStyleValue:c}),changeState:h,rulesState:p}}},[["render",function(l,t,a,u,o,r){const i=d(n("kui-slider"),I),s=d(n("kui-cell-group"),R),f=x,b=d(n("kui-text"),e),y=d(n("kui-space"),$),g=d(n("kui-page"),U),v=d(n("kui-toast"),M);return m(),c(f,{class:"kui-w-full kui-h-full"},{default:h((()=>[p(g,{"custom-header":!1},{body:h((()=>[p(f,{class:"kui-w-full"},{default:h((()=>[p(y,{gap:[30,0],direction:"column"},{default:h((()=>[p(f,{class:"kui-w-full"},{default:h((()=>[p(s,{title:"基本用法"},{default:h((()=>[p(i,{modelValue:l.baseValue,"onUpdate:modelValue":t[0]||(t[0]=e=>l.baseValue=e)},null,8,["modelValue"])])),_:1})])),_:1}),p(f,{class:"kui-w-full"},{default:h((()=>[p(s,{title:"双滑块"},{default:h((()=>[p(i,{modelValue:l.rangeValue,"onUpdate:modelValue":t[1]||(t[1]=e=>l.rangeValue=e),range:""},null,8,["modelValue"])])),_:1})])),_:1}),p(f,{class:"kui-w-full"},{default:h((()=>[p(s,{title:"指定范围"},{default:h((()=>[p(i,{modelValue:l.customRangeValue,"onUpdate:modelValue":t[2]||(t[2]=e=>l.customRangeValue=e),"show-range":"",min:-5,max:5},null,8,["modelValue"])])),_:1})])),_:1}),p(f,{class:"kui-w-full"},{default:h((()=>[p(s,{title:"禁用"},{default:h((()=>[p(i,{modelValue:l.disableValue,"onUpdate:modelValue":t[3]||(t[3]=e=>l.disableValue=e),disabled:""},null,8,["modelValue"])])),_:1})])),_:1}),p(f,{class:"kui-w-full"},{default:h((()=>[p(s,{title:"只读"},{default:h((()=>[p(i,{modelValue:l.readonlyValue,"onUpdate:modelValue":t[4]||(t[4]=e=>l.readonlyValue=e),readonly:""},null,8,["modelValue"])])),_:1})])),_:1}),p(f,{class:"kui-w-full"},{default:h((()=>[p(s,{title:"指定步长"},{default:h((()=>[p(i,{modelValue:l.customStepValue,"onUpdate:modelValue":t[5]||(t[5]=e=>l.customStepValue=e),step:10},null,8,["modelValue"])])),_:1})])),_:1}),p(f,{class:"kui-w-full"},{default:h((()=>[p(s,{title:"隐藏标签"},{default:h((()=>[p(i,{modelValue:l.hiddenLabelValue,"onUpdate:modelValue":t[6]||(t[6]=e=>l.hiddenLabelValue=e),"hidden-label":""},null,8,["modelValue"])])),_:1})])),_:1}),p(f,{class:"kui-w-full"},{default:h((()=>[p(s,{title:"隐藏拖动水波纹",desc:"拖动得时候不显示按钮周围的水波纹样式"},{default:h((()=>[p(i,{modelValue:l.hiddenActiveRipple,"onUpdate:modelValue":t[7]||(t[7]=e=>l.hiddenActiveRipple=e),"hidden-active-ripple":""},null,8,["modelValue"])])),_:1})])),_:1}),p(f,{class:"kui-w-full"},{default:h((()=>[p(s,{title:"自定义主题"},{default:h((()=>[p(f,{class:"kui-my-3"},{default:h((()=>[p(i,{modelValue:l.customThemeColorValue[0],"onUpdate:modelValue":t[8]||(t[8]=e=>l.customThemeColorValue[0]=e),"theme-color":"info"},null,8,["modelValue"])])),_:1}),p(f,{class:"kui-my-6"},{default:h((()=>[p(i,{modelValue:l.customThemeColorValue[1],"onUpdate:modelValue":t[9]||(t[9]=e=>l.customThemeColorValue[1]=e),"theme-color":"danger"},null,8,["modelValue"])])),_:1}),p(f,{class:"kui-my-6"},{default:h((()=>[p(i,{modelValue:l.customThemeColorValue[2],"onUpdate:modelValue":t[10]||(t[10]=e=>l.customThemeColorValue[2]=e),"theme-color":"warning"},null,8,["modelValue"])])),_:1}),p(f,{class:"kui-my-6"},{default:h((()=>[p(i,{modelValue:l.customThemeColorValue[3],"onUpdate:modelValue":t[11]||(t[11]=e=>l.customThemeColorValue[3]=e),"theme-color":"gold"},null,8,["modelValue"])])),_:1}),p(f,{class:"kui-my-6"},{default:h((()=>[p(i,{modelValue:l.customThemeColorValue[4],"onUpdate:modelValue":t[12]||(t[12]=e=>l.customThemeColorValue[4]=e),"theme-color":"cyan"},null,8,["modelValue"])])),_:1}),p(f,{class:"kui-my-6"},{default:h((()=>[p(i,{modelValue:l.customThemeColorValue[5],"onUpdate:modelValue":t[13]||(t[13]=e=>l.customThemeColorValue[5]=e),"theme-color":"purple"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),p(f,{class:"kui-w-full"},{default:h((()=>[p(s,{title:"自定义样式"},{default:h((()=>[p(i,{"inactive-color":"rgba(163,184,255,1)","active-color":"linear-gradient(315deg, rgba(73,143,242,1) 0%,rgba(73,101,242,1) 100%)","thumb-color":"rgba(52,96,250,1)",modelValue:l.customStyleValue,"onUpdate:modelValue":t[14]||(t[14]=e=>l.customStyleValue=e)},null,8,["modelValue"])])),_:1})])),_:1}),p(f,{class:"kui-w-full"},{default:h((()=>[p(s,{title:"自定义滑块按钮",desc:"通过插槽实现"},{default:h((()=>[p(i,{modelValue:l.customThumbStyleValue[0],"onUpdate:modelValue":t[15]||(t[15]=e=>l.customThumbStyleValue[0]=e),"hidden-label":"","hidden-active-ripple":""},{thumb:h((()=>[p(f,{class:"kui-w-5 kui-h-5 kui-rounded-full kui-bg-white kui-shadow kui-border-0 kui-border-blue-600 kui-border kui-border-solid"})])),_:1},8,["modelValue"]),p(f,{class:"kui-mt-3"},{default:h((()=>[p(i,{modelValue:l.customThumbStyleValue[1],"onUpdate:modelValue":t[16]||(t[16]=e=>l.customThumbStyleValue[1]=e),"hidden-label":"","hidden-active-ripple":""},{thumb:h((()=>[p(f,{class:"kui-w-5 kui-h-3 kui-rounded-full kui-bg-blue-600 kui-shadow kui-border-0 kui-border-blue-600 kui-border kui-border-solid kui-flex kui-flex-col kui-items-center kui-justify-center kui-px-1 kui-py-px"},{default:h((()=>[p(b,{color:"white",size:"10px"},{default:h((()=>[k(V(l.customThumbStyleValue[1]),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),p(f,{class:"kui-w-full"},{default:h((()=>[p(s,{title:"选择事件监听"},{default:h((()=>[p(i,{modelValue:u.changeState.state.value,"onUpdate:modelValue":t[17]||(t[17]=e=>u.changeState.state.value=e),onChange:u.changeState.methods.onChange},null,8,["modelValue","onChange"])])),_:1})])),_:1}),p(f,{class:"kui-w-full"},{default:h((()=>[p(s,{title:"值的校验",desc:"暂不支持双滑块"},{default:h((()=>[p(i,{modelValue:u.rulesState.state.value,"onUpdate:modelValue":t[18]||(t[18]=e=>u.rulesState.state.value=e),rules:u.rulesState.rules,onChange:u.rulesState.methods.onChange},null,8,["modelValue","rules","onChange"])])),_:1})])),_:1}),p(s,{title:""},{default:h((()=>[p(b,{color:"hsl(213,10.00%, 56.86%)"},{default:h((()=>[k("示例数据为组件支持的部分数据，详细支持数据请参考组件源码和组件文档")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),p(v,{show:u.changeState.state.toast.show,"onUpdate:show":t[19]||(t[19]=e=>u.changeState.state.toast.show=e),content:u.changeState.state.toast.content},null,8,["show","content"])])),_:1})}]]);export{N as default};
