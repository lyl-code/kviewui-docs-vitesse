import{D as o,E as e,r,h as a,G as l,L as t,d as i,T as d,f as n,o as s,c,w as u,a as p,H as g,m as k,b as C,l as h,K as f,i as b,n as m,p as y}from"./index.6e0bac9a.js";import{_ as w}from"./kui-icons.87a80e4b.js";import{c as x,r as B}from"./kui-page.9f67228f.js";import{g as F}from"./element.f2d79fb5.js";import{_ as v}from"./plugin-vue_export-helper.21dcd24c.js";var _=v(e({name:"kui-collapse-panel",props:{open:{type:Boolean,default:!1},animation:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},name:{type:String,default:""},backgroundColor:{type:String,default:""},color:{type:String,default:""},textColor:{type:String,default:""},borderColor:{type:String,default:""},wrapBackgroundColor:{type:String,default:""},mode:{type:String,default:()=>{var e,r;return null!=(r=null==(e=o(x,void 0))?void 0:e.mode)?r:"light"}},activeTitleTapedState:{type:Boolean,default:!0}},setup(e){const{proxy:n,appContext:s}=i(),c=n.$theme,u=F(),p=r({elId:u,isBorder:!1,isOpen:!1,height:0,mode:e.mode,name:e.name,backgroundColor:e.backgroundColor?e.backgroundColor:"#FFFFFF",color:e.color?e.color:"#000000",textColor:e.textColor?e.textColor:"#000000",borderColor:e.borderColor?e.borderColor:c.colors.light.grey[2],wrapBackgroundColor:e.wrapBackgroundColor}),g=o("collapse"),k=()=>{d().in(n).select(`#${u}`).fields({size:!0},(o=>{p.height=o.height})).exec(),p.backgroundColor="light"==p.mode?e.backgroundColor?e.backgroundColor:"#FFFFFF":e.backgroundColor?uni.kviewUIColor.generate(p.backgroundColor,{dark:!0,list:!1,index:6}):"#333333",p.color="light"==p.mode?e.color?e.color:"#000000":e.backgroundColor?uni.kviewUIColor.generate(e.backgroundColor,{dark:!0,list:!1,index:6}):"#FFFFFF",p.borderColor="light"==p.mode?c.colors.light.grey[2]:c.colors.dark.grey[2],p.wrapBackgroundColor="light"==p.mode?e.wrapBackgroundColor?e.wrapBackgroundColor:c.colors.light.grey[2]:e.wrapBackgroundColor?uni.kviewUIColor.generate(e.wrapBackgroundColor,{dark:!0,list:!1,index:6}):c.colors.dark.grey[2]},C=()=>{p.backgroundColor="light"==p.mode?e.backgroundColor?e.backgroundColor:"#FFFFFF":e.backgroundColor?uni.kviewUIColor.generate(p.backgroundColor,{dark:!0,list:!1,index:6}):"#333333",p.color="light"==p.mode?e.color?e.color:"#000000":e.color?uni.kviewUIColor.generate(e.color,{dark:!0,list:!1,index:6}):c.colors.dark.grey[8],p.borderColor="light"==p.mode?c.colors.light.grey[2]:c.colors.dark.grey[2],p.wrapBackgroundColor="light"==p.mode?e.wrapBackgroundColor?e.wrapBackgroundColor:c.colors.light.grey[2]:e.wrapBackgroundColor?uni.kviewUIColor.generate(p.wrapBackgroundColor,{dark:!0,list:!1,index:6}):c.colors.dark.grey[2]};a((()=>{-1===g.childrens.indexOf(p)&&g.childrens.push(p),k(),l("changeMode",(o=>{p.mode=o,C()}))})),t((()=>e.open),(o=>{p.isOpen=o}));return{data:p,onClick:o=>{e.disabled||(p.isOpen=o,g.setAccordion(u),g.onChange(o,u))},changeMode:C,elId:u}}}),[["render",function(o,e,r,a,l,t){const i=f,d=b,m=B(n("kui-icons"),w);return s(),c(d,{class:"kui-box-border kui-collapse-panel"},{default:u((()=>[p(d,{class:h(["kui-flex kui-justify-between kui-px-4 kui-h-10 kui-items-center kui-border-0 kui-border-solid",{"kui-border-b":!o.data.isOpen,"kui-opacity-30":o.data.isOpen&&o.activeTitleTapedState,"kui-opacity-40":o.disabled}]),style:k({backgroundColor:o.data.backgroundColor,borderColor:o.data.isBorder?o.data.borderColor:"transparent"}),onClick:e[0]||(e[0]=e=>o.onClick(!o.data.isOpen))},{default:u((()=>[g(o.$slots,"title",{},(()=>[p(d,{class:""},{default:u((()=>[p(i,{class:"kui-subpixel-antialiased",style:k({color:o.data.color})},{default:u((()=>[C("折叠面板标题")])),_:1},8,["style"])])),_:1})]),!0),o.$slots["arrow-icon"]?g(o.$slots,"arrow-icon",{key:0},void 0,!0):(s(),c(d,{key:1,class:h(["",{"kui-transform -kui-rotate-180":o.data.isOpen,"kui-collapse-panel--animation":o.animation}])},{default:u((()=>[p(m,{type:"cheveron-down",color:"#999",weight:800,size:36})])),_:1},8,["class"]))])),_:3},8,["class","style"]),p(d,{class:h(["kui-box-border kui-collapse-panel_wrap kui-overflow-hidden kui-h-24",{"is--transition":o.animation,"kui-h-24":o.data.isOpen}]),style:k({height:(o.data.isOpen?o.data.height:0)+"px",backgroundColor:o.data.wrapBackgroundColor})},{default:u((()=>[p(d,{id:o.elId,class:"kui-px-4 kui-py-3 kui-antialiased",style:k({color:o.data.textColor,lineHeight:1.4})},{default:u((()=>[g(o.$slots,"default",{},void 0,!0)])),_:3},8,["id","style"])])),_:3},8,["class","style"])])),_:3})}],["__scopeId","data-v-5773ad5b"]]);var O=v(e({name:"kui-collapse",props:{value:{type:Array,default:[]},accordion:{type:Boolean,default:!1},defaultExpandAll:{type:Boolean,default:!1}},emits:["change","activeItem"],options:{virtualHost:!0},setup(o,e){const l=r({modelValue:""}),i=r([]);t((()=>l.modelValue),(o=>{l.modelValue=o}));a((()=>{m((()=>{i&&i.forEach(((e,r)=>{e.isOpen=!!o.defaultExpandAll,i.length>1&&i.length<3?e.isBorder=0==r:i.length>=3&&(e.isBorder=r>=0&&r<i.length-1)}))}))}));y("collapse",{setAccordion:e=>{m((()=>{i&&i.forEach((r=>{e!==r.elId&&o.accordion&&(r.isOpen=!1)}))}))},onChange:()=>{let o=[];m((()=>{i?(i.forEach(((e,r)=>{if(e.isOpen){let a=e.name?e.name:r;o.push(a)}})),e.emit("change",o)):console.warn("kui-collapse:kui-collapse-panel init error")}))},childrens:i})}}),[["render",function(o,e,r,a,l,t){const i=b;return s(),c(i,{class:"kui-w-full kui-flex kui-flex-col kui-bg-white"},{default:u((()=>[g(o.$slots,"default",{ref:"collapsePanel"})])),_:3})}]]);export{_,O as a};
