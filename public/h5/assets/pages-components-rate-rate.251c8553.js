import{_ as e}from"./kui-icons.3c452229.js";import{v as l,x as a,r as o,A as u,a1 as t,g as n,e as i,i as d,c as r,d as s,w as c,G as V,I as m,H as p,q as f,f as g,s as v,z as h,h as k,B as y,m as C,j as _,T as b,N as w}from"./index.4769b127.js";import{_ as z}from"./kui-text.d338fb2c.js";import{c as U,_ as S}from"./kui-page.12878643.js";import{_ as N}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as I}from"./kui-cell-group.bf65a318.js";import{_ as j}from"./kui-space.2c8c8efa.js";import{_ as x}from"./kui-toast.f1760cdf.js";import"./kui-animation.1c71067a.js";const L={modelValue:{type:[String,Number],default:0},count:{type:[Number,String],default:5},activeColor:{type:String,default:"primary"},activeColorLevel:{type:[String,Number],default:5},inactiveColor:{type:String,default:"grey"},inactiveColorLevel:{type:[String,Number],default:4},iconSize:{type:[String,Number],default:36},activeIcon:{type:String,default:"star"},inactiveIcon:{type:String,default:"star-o"},gap:{type:[String,Number],default:20},allowHalf:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},touchable:{type:Boolean,default:!1},mode:{type:String,default:()=>{var e,a;return null!=(a=null==(e=l(U,void 0))?void 0:e.mode)?a:"light"}},rules:{type:Object,default:{}}};const B=N(a({name:"kui-rate",props:L,emits:["update:modelValue","change"],setup(e,{emit:l}){const{proxy:a}=n(),i=a.$theme,d=o({mode:e.mode,activeColor:e.activeColor,inactiveColor:e.inactiveColor,activeColorLevel:e.activeColorLevel,inactiveColorLevel:e.inactiveColorLevel,value:e.modelValue,error:!1}),r=u((()=>{const l=o({});return l.marginRight=`${e.gap}rpx`,l}));return{name:"kui-rate",rootStyle:r,toNumber:t,state:d,getIconName:(l,a="full")=>l<=e.modelValue?e.activeIcon:e.inactiveIcon,getIconColor:(l,a="full")=>{let o="full"===a?t(e.modelValue):t(e.modelValue)+1,u=l<=o&&!e.disabled?e.activeColor:e.inactiveColor;d.error&&(u="danger");const n=l<=o&&!e.disabled?e.activeColorLevel:e.inactiveColorLevel;return(i.colors[d.mode][u]?i.colors[d.mode][u]:uni.kviewUIColor.generate({dark:"dark"===d.mode,list:!0}))[n]},onTap:(a,o="full")=>{if(e.disabled||e.readonly)return;let u=0;(a>1||e.modelValue!==a)&&(u=a,e.allowHalf&&"half"===o&&(u-=.5)),e.rules&&e.rules.message&&(d.error=!(l=>e.rules.validator(l))(a)),(e=>{l("update:modelValue",e),l("change",e)})(u)}}}}),[["render",function(l,a,o,u,t,n){const b=i(d("kui-icons"),e),w=_,U=i(d("kui-text"),z);return r(),s(w,{class:C(["kui-inline-flex kui-w-full kui-h-full",l.name])},{default:c((()=>[(r(!0),V(m,null,p(l.toNumber(l.count),(e=>(r(),s(w,{class:"kui-flex kui-flex-shrink-0 kui-relative",key:e,style:f(l.rootStyle)},{default:c((()=>[g(b,{type:l.getIconName(e),size:l.iconSize,color:l.getIconColor(e,"full"),onClick:a=>l.onTap(e)},null,8,["type","size","color","onClick"]),l.allowHalf&&l.toNumber(l.modelValue)+1>e?(r(),s(b,{key:0,type:l.activeIcon,size:l.iconSize,class:"kui-absolute kui-inset-t-0 kui-inset-l-0 kui-w-1-2 kui-overflow-hidden",color:l.getIconColor(e,"half"),onClick:a=>l.onTap(e,"half")},null,8,["type","size","color","onClick"])):l.allowHalf&&l.toNumber(l.modelValue)+1<e?(r(),s(b,{key:1,type:l.inactiveColor,size:l.iconSize,class:"kui-absolute kui-inset-t-0 kui-inset-l-0 kui-w-1-2 kui-overflow-hidden",color:l.state.inactiveColor,onClick:a=>l.onTap(e,"half")},null,8,["type","size","color","onClick"])):v("",!0)])),_:2},1032,["style"])))),128)),l.state.error?(r(),s(w,{key:0},{default:c((()=>[h(l.$slots,"error",{},(()=>[g(U,{color:"danger"},{default:c((()=>[k(y(l.rules.message),1)])),_:1})]))])),_:3})):v("",!0)])),_:3},8,["class"])}]]);const H=N({setup(){const e=b(3),l=b(5),a=b(2.5),u=b(3),t=b(3),n=b(3),i=b(3),d=b(3),r=b(3),s={state:o({value:3,toast:{show:!1,content:""}}),methods:{onChange(e){__f__("log","at pages/components/rate/rate.vue:97",e),s.state.toast.content=`当前评分：${e}`,s.state.toast.show=!0}}},c={value:b(3),rules:{validator:e=>e>2,message:"评分必须大于2"}};return{...w({baseValue:e,countValue:l,halfValue:a,sizeValue:u,colorValue:t,iconValue:n,gapValue:i,disabledValue:d,readonlyValue:r}),changeValue:s,rulesValue:c}}},[["render",function(e,l,a,o,u,t){const n=i(d("kui-rate"),B),V=i(d("kui-cell-group"),I),m=i(d("kui-space"),j),p=_,f=i(d("kui-page"),S),v=i(d("kui-toast"),x);return r(),s(p,{class:"kui-w-full kui-h-full"},{default:c((()=>[g(f,{"custom-header":!1},{body:c((()=>[g(p,{class:"kui-w-full"},{default:c((()=>[g(m,{gap:[30,0],direction:"column"},{default:c((()=>[g(V,{title:"基本用法"},{default:c((()=>[g(n,{modelValue:e.baseValue,"onUpdate:modelValue":l[0]||(l[0]=l=>e.baseValue=l)},null,8,["modelValue"])])),_:1}),g(V,{title:"自定义总数"},{default:c((()=>[g(n,{modelValue:e.countValue,"onUpdate:modelValue":l[1]||(l[1]=l=>e.countValue=l),count:8},null,8,["modelValue"])])),_:1}),g(V,{title:"自定义颜色",desc:"支持色阶调整"},{default:c((()=>[g(n,{modelValue:e.colorValue,"onUpdate:modelValue":l[2]||(l[2]=l=>e.colorValue=l)},null,8,["modelValue"]),g(n,{"active-color":"orange",modelValue:e.colorValue,"onUpdate:modelValue":l[3]||(l[3]=l=>e.colorValue=l)},null,8,["modelValue"]),g(n,{"active-color":"danger",modelValue:e.colorValue,"onUpdate:modelValue":l[4]||(l[4]=l=>e.colorValue=l)},null,8,["modelValue"]),g(n,{"active-color":"info",modelValue:e.colorValue,"onUpdate:modelValue":l[5]||(l[5]=l=>e.colorValue=l)},null,8,["modelValue"]),g(n,{"active-color":"cyan",modelValue:e.colorValue,"onUpdate:modelValue":l[6]||(l[6]=l=>e.colorValue=l)},null,8,["modelValue"]),g(n,{"active-color":"primary","active-color-level":8,modelValue:e.colorValue,"onUpdate:modelValue":l[7]||(l[7]=l=>e.colorValue=l)},null,8,["modelValue"])])),_:1}),g(V,{title:"自定义图标",desc:"建议激活图标和未激活图标样式一致"},{default:c((()=>[g(n,{"active-icon":"heart",iconSize:30,"inactive-icon":"heart-o",modelValue:e.iconValue,"onUpdate:modelValue":l[8]||(l[8]=l=>e.iconValue=l)},null,8,["modelValue"])])),_:1}),g(V,{title:"半选"},{default:c((()=>[g(n,{modelValue:e.halfValue,"onUpdate:modelValue":l[9]||(l[9]=l=>e.halfValue=l),"allow-half":""},null,8,["modelValue"]),g(n,{"active-icon":"heart","inactive-icon":"heart-o",modelValue:e.halfValue,"onUpdate:modelValue":l[10]||(l[10]=l=>e.halfValue=l),"allow-half":""},null,8,["modelValue"])])),_:1}),g(V,{title:"自定义大小"},{default:c((()=>[g(n,{modelValue:e.sizeValue,"onUpdate:modelValue":l[11]||(l[11]=l=>e.sizeValue=l),iconSize:26,"allow-half":""},null,8,["modelValue"]),g(n,{modelValue:e.sizeValue,"onUpdate:modelValue":l[12]||(l[12]=l=>e.sizeValue=l),iconSize:36,"allow-half":""},null,8,["modelValue"]),g(n,{modelValue:e.sizeValue,"onUpdate:modelValue":l[13]||(l[13]=l=>e.sizeValue=l),iconSize:46,"allow-half":""},null,8,["modelValue"]),g(n,{modelValue:e.sizeValue,"onUpdate:modelValue":l[14]||(l[14]=l=>e.sizeValue=l),iconSize:56,"allow-half":""},null,8,["modelValue"])])),_:1}),g(V,{title:"自定义间隔"},{default:c((()=>[g(n,{modelValue:e.gapValue,"onUpdate:modelValue":l[15]||(l[15]=l=>e.gapValue=l),gap:15},null,8,["modelValue"]),g(n,{modelValue:e.gapValue,"onUpdate:modelValue":l[16]||(l[16]=l=>e.gapValue=l),gap:20},null,8,["modelValue"]),g(n,{modelValue:e.gapValue,"onUpdate:modelValue":l[17]||(l[17]=l=>e.gapValue=l),gap:25},null,8,["modelValue"]),g(n,{modelValue:e.gapValue,"onUpdate:modelValue":l[18]||(l[18]=l=>e.gapValue=l),gap:30},null,8,["modelValue"])])),_:1}),g(V,{title:"禁选"},{default:c((()=>[g(n,{modelValue:e.disabledValue,"onUpdate:modelValue":l[19]||(l[19]=l=>e.disabledValue=l),disabled:""},null,8,["modelValue"])])),_:1}),g(V,{title:"只读"},{default:c((()=>[g(n,{modelValue:e.readonlyValue,"onUpdate:modelValue":l[20]||(l[20]=l=>e.readonlyValue=l),readonly:""},null,8,["modelValue"])])),_:1}),g(V,{title:"事件监听"},{default:c((()=>[g(n,{modelValue:o.changeValue.state.value,"onUpdate:modelValue":l[21]||(l[21]=e=>o.changeValue.state.value=e),onChange:o.changeValue.methods.onChange},null,8,["modelValue","onChange"])])),_:1}),g(V,{title:"字段校验",desc:"错误提示支持插槽定制"},{default:c((()=>[g(n,{modelValue:o.rulesValue.value.value,"onUpdate:modelValue":l[22]||(l[22]=e=>o.rulesValue.value.value=e),rules:o.rulesValue.rules},null,8,["modelValue","rules"])])),_:1})])),_:1})])),_:1})])),_:1}),g(v,{content:o.changeValue.state.toast.content,show:o.changeValue.state.toast.show,"onUpdate:show":l[23]||(l[23]=e=>o.changeValue.state.toast.show=e)},null,8,["content","show"])])),_:1})}]]);export{H as default};
