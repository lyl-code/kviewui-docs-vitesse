import{_ as e}from"./kui-text.d338fb2c.js";import{v as t,x as l,r as a,A as o,n as u,g as s,e as n,i as r,c as i,G as d,f as m,w as c,d as f,q as p,I as k,H as h,h as g,B as y,s as b,m as x,j as V,T as _,N as v}from"./index.4769b127.js";import{_ as w}from"./kui-switch.5419dd7d.js";import{_ as I}from"./kui-icons.3c452229.js";import{_ as S}from"./kui-numberkeyboard.324a07bf.js";import{c as j,_ as C}from"./kui-page.12878643.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as U}from"./kui-cell-group.bf65a318.js";import{_ as z}from"./kui-space.2c8c8efa.js";import"./kui-animation.1c71067a.js";import"./kui-popup.6cc4c5f3.js";import"./kui-overlay.4319bfe8.js";const $={modelValue:{type:String,default:""},show:{type:Boolean,default:!0},tipsMessage:{type:String,default:""},errorMessage:{type:String,default:""},length:{type:[Number,String],default:6},password:{type:Boolean,default:!0},mode:{type:String,default:()=>{var e,l;return null!=(l=null==(e=t(j,void 0))?void 0:e.mode)?l:"light"}},focus:{type:Boolean,default:!1},autocomplete:{type:Boolean,default:!0}},B="kui-shortpassword";const F=M(l({name:B,props:$,emits:["update:modelValue","change","confirm"],setup(e,{emit:t}){const{proxy:l}=s(),n=l.$theme,r=a({mode:e.mode,activeIndex:0,numberkeyboardShow:!1,list:[],value:""}),i=()=>`1rpx solid ${n.colors[r.mode].grey[2]}`,d=o((()=>{const e=a({});return e.height="100rpx",e.border="none",e.borderTop=e.borderBottom=i(),e}));if(e.length)for(let a=0;a<e.length;a++)r.list[a]={index:a,value:""};const m=t=>{"input"===t?r.activeIndex++:r.activeIndex--,r.activeIndex<=0&&(r.activeIndex=0),r.activeIndex>Number(+e.length-1)&&(r.activeIndex=+e.length-1,e.autocomplete&&(r.numberkeyboardShow=!1))},c=e=>{t("update:modelValue",e)};return u((()=>{r.numberkeyboardShow=e.focus})),uni.$on("changeMode",(e=>{r.mode=e,i()})),{name:B,theme:n,state:r,rootStyle:d,inputItemStyle:e=>{const t=a({});return t.border="none",t.borderRight=i(),t.borderLeft=0===e?i():"",t.background="light"===r.mode?"#FFFFFF":n.colors[r.mode].grey[0],t},cursorStyle:e=>{const t=a({});return t.height="40rpx",t.borderLeft=`1px solid ${n.colors[r.mode].grey[9]}`,t},onClickInput:()=>{r.numberkeyboardShow=!0},onInput:e=>{r.list[r.activeIndex].value=e,c(r.value),m("input"),r.list[r.activeIndex].focus=!0,t("change",r.value),r.numberkeyboardShow||t("confirm",r.value)},deleteInput:t=>{let l=e.modelValue.slice(0,e.modelValue.length-1);r.list[r.activeIndex].value="",c(l),e.modelValue.length===e.length&&r.activeIndex++,m("delete")}}}}),[["render",function(t,l,a,o,u,s){const _=V,v=n(r("kui-text"),e),w=n(r("kui-icons"),I),j=n(r("kui-numberkeyboard"),S);return i(),d(k,null,[m(_,{class:x(t.name)},{default:c((()=>[t.state.list.length?(i(),f(_,{key:0,class:"kui-flex kui-items-center kui-w-full",style:p(t.rootStyle)},{default:c((()=>[(i(!0),d(k,null,h(t.state.list,((e,l)=>(i(),f(_,{key:l,class:"kui-flex-1 kui-h-full kui-justify-center kui-items-center kui-text-center",type:"text",style:p(t.inputItemStyle(l)),onClick:t.onClickInput},{default:c((()=>[m(_,{class:"kui-h-full kui-flex kui-items-center kui-justify-center"},{default:c((()=>[l===t.state.activeIndex&&t.modelValue.length<t.length&&t.state.numberkeyboardShow?(i(),f(_,{key:0,class:"kui-animate-flicker",style:p(t.cursorStyle(l))},null,8,["style"])):(i(),d(k,{key:1},[!t.password&&e.value?(i(),f(v,{key:0,mode:t.state.mode,size:`${t.theme.size.fonts.xl}${t.theme.size.fontUnit}`},{default:c((()=>[g(y(e.value),1)])),_:2},1032,["mode","size"])):e.value?(i(),f(w,{key:1,mode:t.state.mode,size:t.theme.size.fonts.xl,type:"media-record"},null,8,["mode","size"])):b("",!0)],64))])),_:2},1024)])),_:2},1032,["style","onClick"])))),128))])),_:1},8,["style"])):b("",!0),t.tipsMessage||t.errorMessage?(i(),f(_,{key:1,class:"kui-mt-3 kui-flex"},{default:c((()=>[m(_,{class:"kui-flex-1"},{default:c((()=>[t.errorMessage?(i(),f(v,{key:0,mode:t.state.mode,color:"danger"},{default:c((()=>[g(y(t.errorMessage),1)])),_:1},8,["mode"])):t.tipsMessage?(i(),f(v,{key:1,mode:t.state.mode,color:"grey"},{default:c((()=>[g(y(t.tipsMessage),1)])),_:1},8,["mode"])):b("",!0)])),_:1})])),_:1})):b("",!0)])),_:1},8,["class"]),m(j,{mode:t.state.mode,maxlength:t.length,show:t.state.numberkeyboardShow,"onUpdate:show":l[0]||(l[0]=e=>t.state.numberkeyboardShow=e),"right-sidebar":"",modelValue:t.state.value,"onUpdate:modelValue":l[1]||(l[1]=e=>t.state.value=e),onInput:t.onInput,onDelete:t.deleteInput},null,8,["mode","maxlength","show","modelValue","onInput","onDelete"])],64)}]]);const L=M({setup(){const e=_(""),t=_(""),l=_(""),a=_(""),o=_(""),u=_(!1);let s=_("light");return{...v({baseValue:e,customLengthValue:t,textValue:l,tipsValue:a,errorMessage:o,checked:u}),onChange:e=>{},onConfirm:e=>{o.value="666666"!==e?"密码错误":""},changeMode:()=>{s=u.value?"dark":"light",uni.$emit("changeMode",s)}}}},[["render",function(t,l,a,o,u,s){const d=n(r("kui-text"),e),p=n(r("kui-switch"),w),k=V,h=n(r("kui-shortpassword"),F),y=n(r("kui-cell-group"),U),b=n(r("kui-space"),z),x=n(r("kui-page"),C);return i(),f(k,{class:"kui-w-full"},{default:c((()=>[m(x,{"custom-header":!1},{body:c((()=>[m(k,{class:"kui-w-full"},{default:c((()=>[m(b,{gap:[30,0],direction:"column"},{default:c((()=>[m(k,{class:"kui-mt-3 kui-h-full kui-flex kui-items-center"},{default:c((()=>[m(d,null,{default:c((()=>[g("暗黑模式：")])),_:1}),m(p,{modelValue:t.checked,"onUpdate:modelValue":l[0]||(l[0]=e=>t.checked=e),onChange:o.changeMode},null,8,["modelValue","onChange"])])),_:1}),m(k,{class:"kui-w-full"},{default:c((()=>[m(y,{title:"基本用法"},{default:c((()=>[m(k,{class:"kui-w-full"},{default:c((()=>[m(h,{modelValue:t.baseValue,"onUpdate:modelValue":l[1]||(l[1]=e=>t.baseValue=e),focus:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),m(k,{class:"kui-w-full"},{default:c((()=>[m(y,{title:"自定义长度"},{default:c((()=>[m(k,{class:"kui-w-full"},{default:c((()=>[m(h,{modelValue:t.customLengthValue,"onUpdate:modelValue":l[2]||(l[2]=e=>t.customLengthValue=e),length:5},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),m(k,{class:"kui-w-full"},{default:c((()=>[m(y,{title:"普通文本类型"},{default:c((()=>[m(k,{class:"kui-w-full"},{default:c((()=>[m(h,{modelValue:t.textValue,"onUpdate:modelValue":l[3]||(l[3]=e=>t.textValue=e),password:!1},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),m(k,{class:"kui-w-full"},{default:c((()=>[m(y,{title:"提示信息"},{default:c((()=>[m(k,{class:"kui-w-full"},{default:c((()=>[m(h,{modelValue:t.tipsValue,"onUpdate:modelValue":l[4]||(l[4]=e=>t.tipsValue=e),"tips-message":"请输入6位数字密码","error-message":t.errorMessage,onChange:o.onChange,onConfirm:o.onConfirm},null,8,["modelValue","error-message","onChange","onConfirm"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}]]);export{L as default};
