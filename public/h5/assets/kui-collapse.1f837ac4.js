import{v as o,x as e,r,k as a,y as l,g as t,e as i,i as n,c as d,d as s,w as c,f as u,m as p,q as k,z as g,h as C,C as h,j as f,n as b,p as m}from"./index.4769b127.js";import{_ as y}from"./kui-icons.3c452229.js";import{g as w}from"./element.bd39bbbe.js";import{c as x}from"./kui-page.12878643.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";const F=B(e({name:"kui-collapse-panel",props:{open:{type:Boolean,default:!1},animation:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},name:{type:String,default:""},backgroundColor:{type:String,default:""},color:{type:String,default:""},textColor:{type:String,default:""},borderColor:{type:String,default:""},wrapBackgroundColor:{type:String,default:""},mode:{type:String,default:()=>{var e,r;return null!=(r=null==(e=o(x,void 0))?void 0:e.mode)?r:"light"}},activeTitleTapedState:{type:Boolean,default:!0}},setup(e){const{proxy:i,appContext:n}=t(),d=i.$theme,s=w(),c=r({elId:s,isBorder:!1,isOpen:!1,height:0,mode:e.mode,name:e.name,backgroundColor:e.backgroundColor?e.backgroundColor:"#FFFFFF",color:e.color?e.color:"#000000",textColor:e.textColor?e.textColor:"#000000",borderColor:e.borderColor?e.borderColor:d.colors.light.grey[2],wrapBackgroundColor:e.wrapBackgroundColor}),u=o("collapse"),p=()=>{uni.createSelectorQuery().in(i).select(`#${s}`).fields({size:!0},(o=>{c.height=o.height})).exec(),c.backgroundColor="light"==c.mode?e.backgroundColor?e.backgroundColor:"#FFFFFF":e.backgroundColor?uni.kviewUIColor.generate(c.backgroundColor,{dark:!0,list:!1,index:6}):"#333333",c.color="light"==c.mode?e.color?e.color:"#000000":e.backgroundColor?uni.kviewUIColor.generate(e.backgroundColor,{dark:!0,list:!1,index:6}):"#FFFFFF",c.borderColor="light"==c.mode?d.colors.light.grey[2]:d.colors.dark.grey[2],c.wrapBackgroundColor="light"==c.mode?e.wrapBackgroundColor?e.wrapBackgroundColor:d.colors.light.grey[2]:e.wrapBackgroundColor?uni.kviewUIColor.generate(e.wrapBackgroundColor,{dark:!0,list:!1,index:6}):d.colors.dark.grey[2]},k=()=>{c.backgroundColor="light"==c.mode?e.backgroundColor?e.backgroundColor:"#FFFFFF":e.backgroundColor?uni.kviewUIColor.generate(c.backgroundColor,{dark:!0,list:!1,index:6}):"#333333",c.color="light"==c.mode?e.color?e.color:"#000000":e.color?uni.kviewUIColor.generate(e.color,{dark:!0,list:!1,index:6}):d.colors.dark.grey[8],c.borderColor="light"==c.mode?d.colors.light.grey[2]:d.colors.dark.grey[2],c.wrapBackgroundColor="light"==c.mode?e.wrapBackgroundColor?e.wrapBackgroundColor:d.colors.light.grey[2]:e.wrapBackgroundColor?uni.kviewUIColor.generate(c.wrapBackgroundColor,{dark:!0,list:!1,index:6}):d.colors.dark.grey[2]};a((()=>{-1===u.childrens.indexOf(c)&&u.childrens.push(c),p(),uni.$on("changeMode",(o=>{c.mode=o,k()}))})),l((()=>e.open),(o=>{c.isOpen=o}));return{data:c,onClick:o=>{e.disabled||(c.isOpen=o,u.setAccordion(s),u.onChange(o,s))},changeMode:k,elId:s}}}),[["render",function(o,e,r,a,l,t){const b=h,m=f,w=i(n("kui-icons"),y);return d(),s(m,{class:"kui-box-border kui-collapse-panel"},{default:c((()=>[u(m,{class:p(["kui-flex kui-justify-between kui-px-4 kui-h-10 kui-items-center kui-border-0 kui-border-solid",{"kui-border-b":!o.data.isOpen,"kui-opacity-30":o.data.isOpen&&o.activeTitleTapedState,"kui-opacity-40":o.disabled}]),style:k({backgroundColor:o.data.backgroundColor,borderColor:o.data.isBorder?o.data.borderColor:"transparent"}),onClick:e[0]||(e[0]=e=>o.onClick(!o.data.isOpen))},{default:c((()=>[g(o.$slots,"title",{},(()=>[u(m,{class:""},{default:c((()=>[u(b,{class:"kui-subpixel-antialiased",style:k({color:o.data.color})},{default:c((()=>[C("折叠面板标题")])),_:1},8,["style"])])),_:1})]),!0),o.$slots["arrow-icon"]?g(o.$slots,"arrow-icon",{key:0},void 0,!0):(d(),s(m,{key:1,class:p(["",{"kui-transform -kui-rotate-180":o.data.isOpen,"kui-collapse-panel--animation":o.animation}])},{default:c((()=>[u(w,{type:"cheveron-down",color:"#999",weight:800,size:36})])),_:1},8,["class"]))])),_:3},8,["class","style"]),u(m,{class:p(["kui-box-border kui-collapse-panel_wrap kui-overflow-hidden kui-h-24",{"is--transition":o.animation,"kui-h-24":o.data.isOpen}]),style:k({height:(o.data.isOpen?o.data.height:0)+"px",backgroundColor:o.data.wrapBackgroundColor})},{default:c((()=>[u(m,{id:o.elId,class:"kui-px-4 kui-py-3 kui-antialiased",style:k({color:o.data.textColor,lineHeight:1.4})},{default:c((()=>[g(o.$slots,"default",{},void 0,!0)])),_:3},8,["id","style"])])),_:3},8,["class","style"])])),_:3})}],["__scopeId","data-v-88b5bd80"]]);const v=B(e({name:"kui-collapse",props:{value:{type:Array,default:[]},accordion:{type:Boolean,default:!1},defaultExpandAll:{type:Boolean,default:!1}},emits:["change","activeItem"],options:{virtualHost:!0},setup(o,e){const t=r({modelValue:""}),i=r([]);l((()=>t.modelValue),(o=>{t.modelValue=o}));a((()=>{b((()=>{i&&i.forEach(((e,r)=>{e.isOpen=!!o.defaultExpandAll,i.length>1&&i.length<3?e.isBorder=0==r:i.length>=3&&(e.isBorder=r>=0&&r<i.length-1)}))}))}));m("collapse",{setAccordion:e=>{b((()=>{i&&i.forEach((r=>{e!==r.elId&&o.accordion&&(r.isOpen=!1)}))}))},onChange:()=>{let o=[];b((()=>{i?(i.forEach(((e,r)=>{if(e.isOpen){let a=e.name?e.name:r;o.push(a)}})),e.emit("change",o)):__f__("warn","at components/kui-collapse/kui-collapse.vue:91","kui-collapse:kui-collapse-panel init error")}))},childrens:i})}}),[["render",function(o,e,r,a,l,t){const i=f;return d(),s(i,{class:"kui-w-full kui-flex kui-flex-col kui-bg-white"},{default:c((()=>[g(o.$slots,"default",{ref:"collapsePanel"})])),_:3})}]]);export{F as _,v as a};
