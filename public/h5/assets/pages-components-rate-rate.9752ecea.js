var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,n=(l,a,o)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o;import{_ as r}from"./kui-icons.87a80e4b.js";import{D as i,E as d,r as s,M as c,ae as V,d as m,f as p,o as f,c as v,w as g,Q as h,R as y,m as k,a as b,q as C,S as w,H as _,b as U,I as z,l as S,i as j,a4 as I,_ as N}from"./index.6e0bac9a.js";import{c as x,r as O,_ as L}from"./kui-page.9f67228f.js";import{_ as H}from"./kui-text.66024d1c.js";import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as B}from"./kui-cell-group.96f4bfae.js";import{_ as T}from"./kui-space.b29851da.js";import{_ as $}from"./kui-toast.17e4a5d8.js";import"./kui-animation.118fdc33.js";var D={modelValue:{type:[String,Number],default:0},count:{type:[Number,String],default:5},activeColor:{type:String,default:"primary"},activeColorLevel:{type:[String,Number],default:5},inactiveColor:{type:String,default:"grey"},inactiveColorLevel:{type:[String,Number],default:4},iconSize:{type:[String,Number],default:36},activeIcon:{type:String,default:"star"},inactiveIcon:{type:String,default:"star-o"},gap:{type:[String,Number],default:20},allowHalf:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},touchable:{type:Boolean,default:!1},mode:{type:String,default:()=>{var e,l;return null!=(l=null==(e=i(x,void 0))?void 0:e.mode)?l:"light"}},rules:{type:Object,default:{}}};var E=P(d({name:"kui-rate",props:D,emits:["update:modelValue","change"],setup(e,{emit:l}){const{proxy:a}=m(),o=a.$theme,u=s({mode:e.mode,activeColor:e.activeColor,inactiveColor:e.inactiveColor,activeColorLevel:e.activeColorLevel,inactiveColorLevel:e.inactiveColorLevel,value:e.modelValue,error:!1}),t=c((()=>{const l=s({});return l.marginRight=`${e.gap}rpx`,l}));return{name:"kui-rate",rootStyle:t,toNumber:V,state:u,getIconName:(l,a="full")=>l<=e.modelValue?e.activeIcon:e.inactiveIcon,getIconColor:(l,a="full")=>{let t="full"===a?V(e.modelValue):V(e.modelValue)+1,n=l<=t&&!e.disabled?e.activeColor:e.inactiveColor;u.error&&(n="danger");const r=l<=t&&!e.disabled?e.activeColorLevel:e.inactiveColorLevel;return(o.colors[u.mode][n]?o.colors[u.mode][n]:uni.kviewUIColor.generate({dark:"dark"===u.mode,list:!0}))[r]},onTap:(a,o="full")=>{if(e.disabled||e.readonly)return;let t=0;(a>1||e.modelValue!==a)&&(t=a,e.allowHalf&&"half"===o&&(t-=.5)),e.rules&&e.rules.message&&(u.error=!(l=>e.rules.validator(l))(a)),(e=>{l("update:modelValue",e),l("change",e)})(t)}}}}),[["render",function(e,l,a,o,u,t){const n=O(p("kui-icons"),r),i=j,d=O(p("kui-text"),H);return f(),v(i,{class:S(["kui-inline-flex kui-w-full kui-h-full",e.name])},{default:g((()=>[(f(!0),h(w,null,y(e.toNumber(e.count),(l=>(f(),v(i,{class:"kui-flex kui-flex-shrink-0 kui-relative",key:l,style:k(e.rootStyle)},{default:g((()=>[b(n,{type:e.getIconName(l),size:e.iconSize,color:e.getIconColor(l,"full"),onClick:a=>e.onTap(l)},null,8,["type","size","color","onClick"]),e.allowHalf&&e.toNumber(e.modelValue)+1>l?(f(),v(n,{key:0,type:e.activeIcon,size:e.iconSize,class:"kui-absolute kui-inset-t-0 kui-inset-l-0 kui-w-1-2 kui-overflow-hidden",color:e.getIconColor(l,"half"),onClick:a=>e.onTap(l,"half")},null,8,["type","size","color","onClick"])):e.allowHalf&&e.toNumber(e.modelValue)+1<l?(f(),v(n,{key:1,type:e.inactiveColor,size:e.iconSize,class:"kui-absolute kui-inset-t-0 kui-inset-l-0 kui-w-1-2 kui-overflow-hidden",color:e.state.inactiveColor,onClick:a=>e.onTap(l,"half")},null,8,["type","size","color","onClick"])):C("",!0)])),_:2},1032,["style"])))),128)),e.state.error?(f(),v(i,{key:0},{default:g((()=>[_(e.$slots,"error",{},(()=>[b(d,{color:"danger"},{default:g((()=>[U(z(e.rules.message),1)])),_:1})]))])),_:3})):C("",!0)])),_:3},8,["class"])}]]);var R=P({setup(){const e=I(3),r=I(5),i=I(2.5),d=I(3),c=I(3),V=I(3),m=I(3),p=I(3),f=I(3),v={state:s({value:3,toast:{show:!1,content:""}}),methods:{onChange(e){console.log(e),v.state.toast.content=`当前评分：${e}`,v.state.toast.show=!0}}},g={value:I(3),rules:{validator:e=>e>2,message:"评分必须大于2"}};return h=((e,l)=>{for(var a in l||(l={}))u.call(l,a)&&n(e,a,l[a]);if(o)for(var a of o(l))t.call(l,a)&&n(e,a,l[a]);return e})({},N({baseValue:e,countValue:r,halfValue:i,sizeValue:d,colorValue:c,iconValue:V,gapValue:m,disabledValue:p,readonlyValue:f})),l(h,a({changeValue:v,rulesValue:g}));var h}},[["render",function(e,l,a,o,u,t){const n=O(p("kui-rate"),E),r=O(p("kui-cell-group"),B),i=O(p("kui-space"),T),d=j,s=O(p("kui-page"),L),c=O(p("kui-toast"),$);return f(),v(d,{class:"kui-w-full kui-h-full"},{default:g((()=>[b(s,{"custom-header":!1},{body:g((()=>[b(d,{class:"kui-w-full"},{default:g((()=>[b(i,{gap:[30,0],direction:"column"},{default:g((()=>[b(r,{title:"基本用法"},{default:g((()=>[b(n,{modelValue:e.baseValue,"onUpdate:modelValue":l[0]||(l[0]=l=>e.baseValue=l)},null,8,["modelValue"])])),_:1}),b(r,{title:"自定义总数"},{default:g((()=>[b(n,{modelValue:e.countValue,"onUpdate:modelValue":l[1]||(l[1]=l=>e.countValue=l),count:8},null,8,["modelValue"])])),_:1}),b(r,{title:"自定义颜色",desc:"支持色阶调整"},{default:g((()=>[b(n,{modelValue:e.colorValue,"onUpdate:modelValue":l[2]||(l[2]=l=>e.colorValue=l)},null,8,["modelValue"]),b(n,{"active-color":"orange",modelValue:e.colorValue,"onUpdate:modelValue":l[3]||(l[3]=l=>e.colorValue=l)},null,8,["modelValue"]),b(n,{"active-color":"danger",modelValue:e.colorValue,"onUpdate:modelValue":l[4]||(l[4]=l=>e.colorValue=l)},null,8,["modelValue"]),b(n,{"active-color":"info",modelValue:e.colorValue,"onUpdate:modelValue":l[5]||(l[5]=l=>e.colorValue=l)},null,8,["modelValue"]),b(n,{"active-color":"cyan",modelValue:e.colorValue,"onUpdate:modelValue":l[6]||(l[6]=l=>e.colorValue=l)},null,8,["modelValue"]),b(n,{"active-color":"primary","active-color-level":8,modelValue:e.colorValue,"onUpdate:modelValue":l[7]||(l[7]=l=>e.colorValue=l)},null,8,["modelValue"])])),_:1}),b(r,{title:"自定义图标",desc:"建议激活图标和未激活图标样式一致"},{default:g((()=>[b(n,{"active-icon":"heart",iconSize:30,"inactive-icon":"heart-o",modelValue:e.iconValue,"onUpdate:modelValue":l[8]||(l[8]=l=>e.iconValue=l)},null,8,["modelValue"])])),_:1}),b(r,{title:"半选"},{default:g((()=>[b(n,{modelValue:e.halfValue,"onUpdate:modelValue":l[9]||(l[9]=l=>e.halfValue=l),"allow-half":""},null,8,["modelValue"]),b(n,{"active-icon":"heart","inactive-icon":"heart-o",modelValue:e.halfValue,"onUpdate:modelValue":l[10]||(l[10]=l=>e.halfValue=l),"allow-half":""},null,8,["modelValue"])])),_:1}),b(r,{title:"自定义大小"},{default:g((()=>[b(n,{modelValue:e.sizeValue,"onUpdate:modelValue":l[11]||(l[11]=l=>e.sizeValue=l),iconSize:26,"allow-half":""},null,8,["modelValue"]),b(n,{modelValue:e.sizeValue,"onUpdate:modelValue":l[12]||(l[12]=l=>e.sizeValue=l),iconSize:36,"allow-half":""},null,8,["modelValue"]),b(n,{modelValue:e.sizeValue,"onUpdate:modelValue":l[13]||(l[13]=l=>e.sizeValue=l),iconSize:46,"allow-half":""},null,8,["modelValue"]),b(n,{modelValue:e.sizeValue,"onUpdate:modelValue":l[14]||(l[14]=l=>e.sizeValue=l),iconSize:56,"allow-half":""},null,8,["modelValue"])])),_:1}),b(r,{title:"自定义间隔"},{default:g((()=>[b(n,{modelValue:e.gapValue,"onUpdate:modelValue":l[15]||(l[15]=l=>e.gapValue=l),gap:15},null,8,["modelValue"]),b(n,{modelValue:e.gapValue,"onUpdate:modelValue":l[16]||(l[16]=l=>e.gapValue=l),gap:20},null,8,["modelValue"]),b(n,{modelValue:e.gapValue,"onUpdate:modelValue":l[17]||(l[17]=l=>e.gapValue=l),gap:25},null,8,["modelValue"]),b(n,{modelValue:e.gapValue,"onUpdate:modelValue":l[18]||(l[18]=l=>e.gapValue=l),gap:30},null,8,["modelValue"])])),_:1}),b(r,{title:"禁选"},{default:g((()=>[b(n,{modelValue:e.disabledValue,"onUpdate:modelValue":l[19]||(l[19]=l=>e.disabledValue=l),disabled:""},null,8,["modelValue"])])),_:1}),b(r,{title:"只读"},{default:g((()=>[b(n,{modelValue:e.readonlyValue,"onUpdate:modelValue":l[20]||(l[20]=l=>e.readonlyValue=l),readonly:""},null,8,["modelValue"])])),_:1}),b(r,{title:"事件监听"},{default:g((()=>[b(n,{modelValue:o.changeValue.state.value,"onUpdate:modelValue":l[21]||(l[21]=e=>o.changeValue.state.value=e),onChange:o.changeValue.methods.onChange},null,8,["modelValue","onChange"])])),_:1}),b(r,{title:"字段校验",desc:"错误提示支持插槽定制"},{default:g((()=>[b(n,{modelValue:o.rulesValue.value.value,"onUpdate:modelValue":l[22]||(l[22]=e=>o.rulesValue.value.value=e),rules:o.rulesValue.rules},null,8,["modelValue","rules"])])),_:1})])),_:1})])),_:1})])),_:1}),b(c,{content:o.changeValue.state.toast.content,show:o.changeValue.state.toast.show,"onUpdate:show":l[23]||(l[23]=e=>o.changeValue.state.toast.show=e)},null,8,["content","show"])])),_:1})}]]);export{R as default};
