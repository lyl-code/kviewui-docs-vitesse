import{D as e,E as t,M as a,r as l,G as o,L as n,d as s,f as i,o as u,c as d,w as r,Q as m,R as c,m as h,a as f,S as g,l as C,b as p,I as v,q as S,i as k,ac as x,ad as w,a4 as V,J as y,$ as b}from"./index.6e0bac9a.js";import{_}from"./kui-text.66024d1c.js";import{c as M,r as T,_ as j}from"./kui-page.9f67228f.js";import{_ as z}from"./kui-switch.2a261550.js";import{_ as U}from"./kui-cell.7dd07a03.js";import{_ as D}from"./kui-cell-group.96f4bfae.js";import{_ as I}from"./kui-space.b29851da.js";import{g as N}from"./array.8ffd8dde.js";import{_ as $}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as H}from"./kui-icons.87a80e4b.js";import{_ as P}from"./kui-popup.45005a92.js";import{_ as Z}from"./kui-toast.17e4a5d8.js";import"./kui-animation.118fdc33.js";import"./kui-overlay.8c99312b.js";var A=$(t({name:"kui-picker-view",props:{modelValue:{type:Array,default:()=>[]},defaultValue:{type:Array,default:()=>[]},formatValue:{type:String,default:""},formatSeparator:{type:String,default:""},columns:{type:Array,default:()=>[]},indicatorStyle:{type:String,default:""},maskStyle:{type:String,default:""},mode:{type:String,default:()=>{var t,a;return null!=(a=null==(t=e(M,void 0))?void 0:t.mode)?a:"light"}}},emits:["change","update:modelValue"],setup(e,{emit:t}){const{proxy:i}=s();i.$theme;const u=a((()=>{const e=l({});return e.height="400rpx",e})),d=l({columns:[],value:e.modelValue,defaultValue:[],multise:{show:!1,chain:!1,index:0},mode:e.mode});let r=0;const m=(t,a)=>{let l=t.findIndex((t=>t.value===e.defaultValue[a]));return l<0?0:l},c=(t,a,l="default")=>{d.columns[a]=[];for(let o=0;o<t.length;o++)e.defaultValue?0===a&&(d.defaultValue[0]=[m(t,0)]):0===o&&(d.value[a]={index:o,text:t[o].text,value:t[o].value}),d.columns[a].push({text:t[o].text,value:t[o].value,disable:t[o].disable,className:t[o].className,children:t[o].children});"[object Array]"===Object.prototype.toString.call(t)?(d.value[a]={index:m(t,a),text:t[m(t,a)].text,value:t[m(t,a)].value},d.defaultValue[a]=[m(t,a)],t[m(t,a)].children&&(r++,"default"!==l&&r--,c(t[m(t,a)].children,r))):t.children&&(r++,c(t.children,r))},h=()=>{for(let t=0;t<d.columns.length;t++)if(e.defaultValue[t]){let a=d.columns[t].findIndex((a=>a.value===e.defaultValue[t]));d.value[t]={index:a,text:d.columns[t][a].text,value:d.columns[t][a].value}}else d.value[t]={index:0,text:d.columns[t][0].text,value:d.columns[t][0].value}},f=t=>{var a;if(t.length>0)if(N(t)>0)d.multise.show=!0,d.columns=t,h();else if(null==(a=t[0])?void 0:a.children)d.multise.chain=d.multise.show=!0,c(t,0),h();else{d.columns=[t];let a=d.columns[0].findIndex((t=>t.value===e.defaultValue[0]));d.defaultValue[0]=[a],d.value[0]={index:a,text:d.columns[0][a].text,value:d.columns[0][a].value}}};f(e.columns);return o("changeMode",(e=>{d.mode=e})),n((()=>e.columns),(e=>{e.length>0?f(e):(d.columns=[],r=0)})),{name:"kui-picker-view",onChange:(e,a)=>{d.value[e]={index:a.detail.value[0],text:d.columns[e][a.detail.value[0]].text,value:d.columns[e][a.detail.value[0]].value},d.multise.chain&&e<d.columns.length-1&&c(d.columns[e][a.detail.value[0]].children,e+1,"chain"),((e,a,l)=>{t("update:modelValue",e),l.detail={index:a,value:l.detail.value[0]},t("change",l)})(d.value,e,a)},state:d,pickerViewStyle:u,getLevel:N}}}),[["render",function(e,t,a,l,o,n){const s=T(i("kui-text"),_),V=k,y=x,b=w;return u(),d(V,{class:C(["kui-w-full kui-flex",e.name])},{default:r((()=>[e.state.columns?(u(!0),m(g,{key:0},c(e.state.columns,((t,a)=>(u(),d(b,{class:"kui-w-full kui-h-full","mask-style":e.maskStyle?e.maskStyle:"dark"===e.state.mode?"background: linear-gradient(0deg,rgba(46,46,48,0),rgba(0,0,0,0),rgba(46,46,48,0))":"","indicator-style":e.indicatorStyle?e.indicatorStyle:"height: 70rpx;",style:h(e.pickerViewStyle),key:a,value:e.state.defaultValue[a],onChange:t=>{e.onChange(a,t)}},{default:r((()=>[f(y,null,{default:r((()=>[(u(!0),m(g,null,c(t,((t,l)=>(u(),d(V,{class:C(["item kui-h-full kui-flex kui-justify-center kui-items-center",e.state.value[a].index!==l&&"dark"===e.state.mode?"kui-opacity-60":""]),key:l},{default:r((()=>[f(s,{mode:e.state.mode,size:"16px"},{default:r((()=>[p(v(t.text),1)])),_:2},1032,["mode"])])),_:2},1032,["class"])))),128))])),_:2},1024)])),_:2},1032,["mask-style","indicator-style","style","value","onChange"])))),128)):S("",!0)])),_:1},8,["class"])}],["__scopeId","data-v-49201574"]]),B={modelValue:{type:Array,default:()=>[]},defaultValue:{type:Array,default:()=>[]},formatValue:{type:String,default:""},formatSeparator:{type:String,default:""},show:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingColor:{type:String,default:"primary"},loadingSize:{type:[String,Number],default:48},loadingIcon:{type:String,default:"spinner8"},columns:{type:Array,default:()=>[]},title:{type:String,default:""},cancelText:{type:String,default:"取消"},confirmText:{type:String,default:"确定"},mode:{type:String,default:()=>{var t,a;return null!=(a=null==(t=e(M,void 0))?void 0:t.mode)?a:"light"}},popupHeight:{type:[String,Number],default:500}};var J=$(t({name:"kui-picker",props:B,emits:["change","update:modelValue","update:show","confirm","cancel","update:formatValue","update:loading","update:columns"],setup(e,{emit:t}){var a;const{proxy:i}=s(),u=i.$theme,d=V(null),r=l({selectedValue:e.modelValue,loading:e.loading,loadingIcon:e.loadingIcon,loadingSize:e.loadingSize,loadingColor:e.loadingColor,columns:e.columns,mode:e.mode});(null==(a=e.columns)?void 0:a.length)||console.warn("picker-view debug info: columns配置错误");const m=()=>{t("update:columns",[]),t("update:show",!1),t("update:loading",!1)};return n((()=>e.columns),(e=>{r.columns=e})),n((()=>[e.show,e.loading,e.loadingIcon,e.loadingColor,e.loadingSize]),(e=>{e[0]&&(d.value.open(),t("update:show",!0)),r.loading=e[1],r.loadingIcon=e[2],r.loadingColor=e[3],r.loadingSize=e[4]})),n((()=>e.modelValue),(e=>{r.selectedValue=e})),o("changeMode",(e=>{r.mode=e})),{name:"kui-picker",theme:u,state:r,pickerPopup:d,onClose:m,onChange:e=>{var a,l;a=r.selectedValue,l=e,t("update:modelValue",a),t("change",l)},onConfirm:()=>{t("confirm",{value:r.selectedValue}),e.formatSeparator&&t("update:formatValue",(t=>{if(t){let a="";for(let l in t)a=a?`${a}${e.formatSeparator}${t[l].text}`:t[l].text;return a}})(r.selectedValue)),m(),d.value.forceClose()},onCancel:()=>{t("cancel",{value:e.modelValue}),m(),d.value.forceClose()},onTouch:()=>{}}}}),[["render",function(e,t,a,l,o,n){const s=T(i("kui-text"),_),m=k,c=T(i("kui-picker-view"),A),g=T(i("kui-icons"),H),x=T(i("kui-popup"),P);return u(),d(m,{class:C(e.name)},{default:r((()=>[f(x,{ref:"pickerPopup",position:"bottom",height:`${e.popupHeight}rpx`,onClose:e.onClose},{default:r((()=>[f(m,{class:"kui-py-4 kui-px-5",onClick:y(e.onTouch,["stop","prevent"])},{default:r((()=>[f(m,{class:"kui-w-full kui-flex kui-justify-between kui-items-center"},{default:r((()=>[f(m,{onClick:y(e.onCancel,["stop","prevent"])},{default:r((()=>[f(s,{color:e.theme.colors[e.state.mode].grey[6]},{default:r((()=>[p(v(e.cancelText),1)])),_:1},8,["color"])])),_:1},8,["onClick"]),f(m,null,{default:r((()=>[e.title?(u(),d(s,{key:0,mode:e.state.mode,size:`${e.theme.size.fonts.lg}${e.theme.size.fontUnit}`},{default:r((()=>[p(v(e.title),1)])),_:1},8,["mode","size"])):S("",!0)])),_:1}),f(m,{onClick:y(e.onConfirm,["stop","prevent"])},{default:r((()=>[f(s,{color:e.theme.colors[e.state.mode].primary[5]},{default:r((()=>[p(v(e.confirmText),1)])),_:1},8,["color"])])),_:1},8,["onClick"])])),_:1}),f(m,{class:"kui-mt-6"},{default:r((()=>[f(c,{mode:e.state.mode,columns:e.state.columns,modelValue:e.state.selectedValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.state.selectedValue=t),"default-value":e.defaultValue,onChange:e.onChange},null,8,["mode","columns","modelValue","default-value","onChange"])])),_:1})])),_:1},8,["onClick"]),e.state.loading?(u(),d(m,{key:0,class:"kui-absolute kui-inset-t-0 kui-inset-l-0 kui-w-full kui-h-full kui-flex kui-flex-col kui-justify-center kui-items-center kui-z-50 loading",style:h({backgroundColor:"light"===e.state.mode?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.8)"}),onClick:y(e.onTouch,["stop","prevent"])},{default:r((()=>[f(m,{class:"kui-animate-spin"},{default:r((()=>[f(g,{type:e.loadingIcon,color:e.loadingColor,size:e.loadingSize},null,8,["type","color","size"])])),_:1})])),_:1},8,["style","onClick"])):S("",!0)])),_:1},8,["height","onClose"])])),_:1},8,["class"])}],["__scopeId","data-v-21ba20a1"]]);var O=$({setup(){const e=l({mode:"light",modeChecked:!1}),t=l({content:"",show:!1}),a={state:l({show:!1,value:[],showText:"",defaultValue:["HZ"],title:"请选择城市",columns:[{text:"上海市",value:"SH",disable:!1},{text:"北京市",value:"BJ",disable:!1},{text:"杭州市",value:"HZ",disable:!1},{text:"哈尔滨市",value:"HRB",disable:!1},{text:"郑州市",value:"ZZ",disable:!1}]}),methods:{onClick(){a.state.show=!0},onChange(e){console.log(e)},onConfirm(e){console.log(e),a.state.showText=a.state.value[0].text,t.content=`当前选中值：${JSON.stringify(a.state.value[0].value)}`,t.show=!0},onCancel(e){console.log(e)}}},o=e=>{if(e){let t=[];for(let a in e)t.push(e[a].value);return t}},s={state:l({show:!1,value:[],showText:"",formatValue:"",formatSeparator:"-",title:"请选择城市",columns:[[{text:"亚洲",value:"YZ"},{text:"欧洲",value:"OZ"}],[{text:"中国",value:"CHN"},{text:"瑞典",value:"SWE"}],[{text:"北京",value:"BJ"},{text:"上海",value:"SH"}]]}),methods:{onClick(){s.state.show=!0},onChange(e){console.log(e)},onConfirm(e){t.content=`当前选中值：${JSON.stringify(o(s.state.value))}`,t.show=!0},onCancel(e){console.log(e)}}};n((()=>s.state.formatValue),(e=>{s.state.showText=e}));const i={state:l({show:!1,value:[],formatValue:"",formatSeparator:"-",showText:"",showValue:"",title:"请选择城市",columns:[{text:"亚洲",value:"YZ",children:[{text:"中国",value:"CHN",children:[{text:"北京",value:"Beijing"},{text:"上海",value:"Shanghai"},{text:"广州",value:"Guangzhou"}]},{text:"日本",value:"JPN",children:[{text:"东京",value:"Tokyo"},{text:"北海道",value:"Hokkaido"}]}]},{text:"欧洲",value:"OZ",children:[{text:"英国",value:"GBR",children:[{text:"伦敦",value:"London"},{text:"爱丁堡",value:"Èideann"}]},{text:"法国",value:"FRA",children:[{text:"巴黎",value:"Paris"},{text:"马赛",value:"Marseille"}]}]}]}),methods:{onClick(){i.state.show=!0},onChange(e){console.log(e)},onConfirm(){t.content=`当前选中值：${JSON.stringify(o(i.state.value))}`,t.show=!0},onCancel(e){console.log(e)},formatValue(){if(i.state.value)for(let e in i.state.value)i.state.showText=i.state.showText?`${i.state.showText}-${i.state.value[e].text}`:i.state.value[e].text}}};n((()=>i.state.formatValue),(e=>{i.state.showText=e}));const u={state:l({show:!1,value:[],defaultValue:["OZ","GBR","Èideann"],formatValue:"",formatSeparator:"-",showText:"",title:"请选择城市",columns:[{text:"亚洲",value:"YZ",children:[{text:"中国",value:"CHN",children:[{text:"北京",value:"Beijing"},{text:"上海",value:"Shanghai"},{text:"广州",value:"Guangzhou"}]},{text:"日本",value:"JPN",children:[{text:"东京",value:"Tokyo"},{text:"北海道",value:"Hokkaido"}]}]},{text:"欧洲",value:"OZ",children:[{text:"英国",value:"GBR",children:[{text:"伦敦",value:"London"},{text:"爱丁堡",value:"Èideann"}]},{text:"法国",value:"FRA",children:[{text:"巴黎",value:"Paris"},{text:"马赛",value:"Marseille"}]}]}]}),methods:{onClick(e=""){u.state.show=!0},onChange(e){console.log(e)},onConfirm(e){t.content=`当前选中值：${JSON.stringify(o(u.state.value))}`,t.show=!0},onCancel(e){console.log(e)}}};n((()=>u.state.formatValue),(e=>{u.state.showText=e}));const d={state:l({show:!1,value:[],formatValue:"",formatSeparator:"-",showText:"",showValue:"",loadingIcon:"spinner8",loadingSize:48,loadingColor:"primary",title:"请选择城市",loading:!1,columns:[],data:[{text:"亚洲",value:"YZ",children:[{text:"中国",value:"CHN",children:[{text:"北京",value:"Beijing"},{text:"上海",value:"Shanghai"},{text:"广州",value:"Guangzhou"}]},{text:"日本",value:"JPN",children:[{text:"东京",value:"Tokyo"},{text:"北海道",value:"Hokkaido"}]}]},{text:"欧洲",value:"OZ",children:[{text:"英国",value:"GBR",children:[{text:"伦敦",value:"London"},{text:"爱丁堡",value:"Èideann"}]},{text:"法国",value:"FRA",children:[{text:"巴黎",value:"Paris"},{text:"马赛",value:"Marseille"}]}]}]}),methods:{onClick(e="spinner8",t="primary",a=48){d.state.loading=!0,d.state.loadingIcon=e,d.state.loadingColor=t,d.state.loadingSize=a,d.state.columns=d.state.data,d.methods.showPopup()},showPopup(){d.state.show=!0},onChange(e){console.log(e)},onConfirm(){t.content=`当前选中值：${JSON.stringify(o(d.state.value))}`,t.show=!0},onCancel(e){console.log(e)},initPickerStyle(){d.state.loadingIcon="spinner8",d.state.loadingColor="primary",d.state.loadingSize=48},getDataAsync(){d.state.loading=!0,d.state.columns=[],setTimeout((()=>{d.state.columns=d.state.data,d.state.loading=!1}),2e3),d.methods.initPickerStyle(),d.methods.showPopup()}}};return{modeState:e,changeMode:()=>{e.mode="light"===e.mode?"dark":"light",b("changeMode",e.mode)},toastState:t,baseState:a,multiseState:s,multiseChainState:i,multiseChainDefaultState:u,loadingMultiseChainState:d}}},[["render",function(e,t,a,l,o,n){const s=T(i("kui-text"),_),m=T(i("kui-switch"),z),c=k,h=T(i("kui-cell"),U),g=T(i("kui-cell-group"),D),C=T(i("kui-space"),I),v=T(i("kui-page"),j),S=T(i("kui-picker"),J),x=T(i("kui-toast"),Z);return u(),d(c,{class:"kui-w-full kui-h-full"},{default:r((()=>[f(v,{"custom-header":!1},{body:r((()=>[f(c,{class:"kui-w-full kui-h-full"},{default:r((()=>[f(c,{class:"kui-my-3 kui-flex"},{default:r((()=>[f(s,null,{default:r((()=>[p("暗黑模式：")])),_:1}),f(m,{modelValue:l.modeState.modeChecked,"onUpdate:modelValue":t[0]||(t[0]=e=>l.modeState.modeChecked=e),onChange:l.changeMode},null,8,["modelValue","onChange"])])),_:1}),f(C,{gap:[30,0],direction:"column",block:""},{default:r((()=>[f(g,{title:"单列选择"},{default:r((()=>[f(h,{title:"基本用法","show-right-icon":!1,onClick:l.baseState.methods.onClick,desc:l.baseState.state.showText,center:""},null,8,["onClick","desc"])])),_:1}),f(g,{title:"多列选择"},{default:r((()=>[f(h,{title:"基本用法","show-right-icon":!1,onClick:l.multiseState.methods.onClick,desc:l.multiseState.state.showText,center:""},null,8,["onClick","desc"]),f(h,{title:"多级联动","show-right-icon":!1,onClick:l.multiseChainState.methods.onClick,desc:l.multiseChainState.state.showText,center:""},null,8,["onClick","desc"]),f(h,{title:"设置默认选中","show-right-icon":!1,onClick:t[1]||(t[1]=e=>l.multiseChainDefaultState.methods.onClick()),desc:l.multiseChainDefaultState.state.showText,center:""},null,8,["desc"])])),_:1}),f(g,{title:"加载状态"},{default:r((()=>[f(h,{title:"基本用法","show-right-icon":!1,onClick:l.loadingMultiseChainState.methods.onClick,desc:l.loadingMultiseChainState.state.showText,center:""},null,8,["onClick","desc"]),f(h,{title:"自定义加载图标样式","show-right-icon":!1,onClick:t[2]||(t[2]=e=>l.loadingMultiseChainState.methods.onClick("spinner9","blue")),desc:l.loadingMultiseChainState.state.showText,center:""},null,8,["desc"]),f(h,{title:"异步获取","show-right-icon":!1,onClick:l.loadingMultiseChainState.methods.getDataAsync,desc:l.loadingMultiseChainState.state.showText,center:""},null,8,["onClick","desc"])])),_:1})])),_:1})])),_:1})])),_:1}),f(S,{columns:l.baseState.state.columns,title:l.baseState.state.title,modelValue:l.baseState.state.value,"onUpdate:modelValue":t[3]||(t[3]=e=>l.baseState.state.value=e),"default-value":l.baseState.state.defaultValue,show:l.baseState.state.show,"onUpdate:show":t[4]||(t[4]=e=>l.baseState.state.show=e),onChange:l.baseState.methods.onChange,onConfirm:l.baseState.methods.onConfirm,onCancel:l.baseState.methods.onCancel},null,8,["columns","title","modelValue","default-value","show","onChange","onConfirm","onCancel"]),f(S,{columns:l.multiseState.state.columns,title:l.multiseState.state.title,modelValue:l.multiseState.state.value,"onUpdate:modelValue":t[5]||(t[5]=e=>l.multiseState.state.value=e),show:l.multiseState.state.show,"onUpdate:show":t[6]||(t[6]=e=>l.multiseState.state.show=e),formatValue:l.multiseState.state.formatValue,"onUpdate:formatValue":t[7]||(t[7]=e=>l.multiseState.state.formatValue=e),"format-separator":l.multiseState.state.formatSeparator,onChange:l.multiseState.methods.onChange,onConfirm:l.multiseState.methods.onConfirm,onCancel:l.multiseState.methods.onCancel},null,8,["columns","title","modelValue","show","formatValue","format-separator","onChange","onConfirm","onCancel"]),f(S,{columns:l.multiseChainState.state.columns,title:l.multiseChainState.state.title,modelValue:l.multiseChainState.state.value,"onUpdate:modelValue":t[8]||(t[8]=e=>l.multiseChainState.state.value=e),formatValue:l.multiseChainState.state.formatValue,"onUpdate:formatValue":t[9]||(t[9]=e=>l.multiseChainState.state.formatValue=e),"format-separator":l.multiseChainState.state.formatSeparator,show:l.multiseChainState.state.show,"onUpdate:show":t[10]||(t[10]=e=>l.multiseChainState.state.show=e),onChange:l.multiseChainState.methods.onChange,onConfirm:l.multiseChainState.methods.onConfirm,onCancel:l.multiseChainState.methods.onCancel},null,8,["columns","title","modelValue","formatValue","format-separator","show","onChange","onConfirm","onCancel"]),f(S,{columns:l.multiseChainDefaultState.state.columns,title:l.multiseChainDefaultState.state.title,"default-value":l.multiseChainDefaultState.state.defaultValue,modelValue:l.multiseChainDefaultState.state.value,"onUpdate:modelValue":t[11]||(t[11]=e=>l.multiseChainDefaultState.state.value=e),show:l.multiseChainDefaultState.state.show,"onUpdate:show":t[12]||(t[12]=e=>l.multiseChainDefaultState.state.show=e),"format-value":l.multiseChainDefaultState.state.formatValue,"onUpdate:format-value":t[13]||(t[13]=e=>l.multiseChainDefaultState.state.formatValue=e),"format-separator":l.multiseChainDefaultState.state.formatSeparator,onChange:l.multiseChainState.methods.onChange,onConfirm:l.multiseChainDefaultState.methods.onConfirm,onCancel:l.multiseChainDefaultState.methods.onCancel},null,8,["columns","title","default-value","modelValue","show","format-value","format-separator","onChange","onConfirm","onCancel"]),f(S,{columns:l.loadingMultiseChainState.state.columns,title:l.loadingMultiseChainState.state.title,modelValue:l.loadingMultiseChainState.state.value,"onUpdate:modelValue":t[14]||(t[14]=e=>l.loadingMultiseChainState.state.value=e),formatValue:l.loadingMultiseChainState.state.formatValue,"onUpdate:formatValue":t[15]||(t[15]=e=>l.loadingMultiseChainState.state.formatValue=e),"format-separator":l.loadingMultiseChainState.state.formatSeparator,show:l.loadingMultiseChainState.state.show,"onUpdate:show":t[16]||(t[16]=e=>l.loadingMultiseChainState.state.show=e),loading:l.loadingMultiseChainState.state.loading,"onUpdate:loading":t[17]||(t[17]=e=>l.loadingMultiseChainState.state.loading=e),onChange:l.loadingMultiseChainState.methods.onChange,onConfirm:l.loadingMultiseChainState.methods.onConfirm,"loading-icon":l.loadingMultiseChainState.state.loadingIcon,"loading-color":l.loadingMultiseChainState.state.loadingColor,onCancel:l.loadingMultiseChainState.methods.onCancel},null,8,["columns","title","modelValue","formatValue","format-separator","show","loading","onChange","onConfirm","loading-icon","loading-color","onCancel"]),f(x,{show:l.toastState.show,"onUpdate:show":t[18]||(t[18]=e=>l.toastState.show=e),content:l.toastState.content},null,8,["show","content"])])),_:1})}]]);export{O as default};
